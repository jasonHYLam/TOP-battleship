(()=>{"use strict";var e={426:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(537),r=t.n(o),i=t(645),a=t.n(i)()(r());a.push([e.id,"body {\n    margin: 0 auto;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: black;\n}\n.container {\n    display: flex;\n    flex-direction: row;\n    gap: 40px;\n}\n\n.clickable {\n    cursor: pointer;\n}\n\n.popup {\n    /* position: absolute; */\n    width: 1500px;\n    height: 700px;\n    background-color: cornflowerblue;\n    /* display: none; */\n}\n\n.blocker {\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    content: '';\n    position: fixed;\n}\n\n.pregame-space {\n    margin: 1px;\n    /* width: 30px;\n    height: 30px; */\n    border: black 1px solid;\n    background-color: white;\n    cursor: pointer;\n}\n\n.pregame-container {\n    display: flex;\n    flex-direction: row;\n    position: relative;\n}\n\n.start-button {\n    background-color: bisque;\n    display: none;\n    cursor: pointer;\n}\n.ship-container {\n    height: auto;\n    display: flex;\n    flex-direction:column;\n    gap: 20px;\n}\n\n.ship {\n    height: 30px;\n    background-color: white;\n    cursor: pointer;\n}\n\n.carrier {\n    width: 150px;\n}\n\n.battleship {\n    width: 120px;\n}\n\n.cruiser, .submarine {\n    width: 90px;\n}\n\n.destroyer {\n    width: 60px;\n}\n\n.gameboard-container, .initial-grid {\n    width: 500px;\n    height: 500px;\n    display: flex;\n    flex-direction: column;\n    background-color: bisque;\n}\n\n.row {\n    flex: 1;\n    display: flex;\n}\n\n.column {\n    flex: 1;\n    background-color: grey;\n    text-align: center;\n    line-height:50px;\n    font-size: 40px;\n}\n\n\n\n.selected-ship-off-grid {\n    background-color: beige;\n    border: white solid 2px;\n    box-sizing: border-box;\n}\n\n\n.ship-in-space {\n    background-color: white;\n}\n\n.grey-out {\n    background-color: darkslategrey;\n}\n\n.valid-hovering {\n    background-color: aqua;\n}\n\n.invalid-hovering {\n    background-color: coral;\n}\n\n.ship-head-hover {\n    background-color: goldenrod;\n}\n\n\n.selected-ship-on-grid {\n    background-color: darkgrey;\n    \n}\n\n.game-hovering {\n    background-color: white;\n}","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;IACI,cAAc;IACd,YAAY;IACZ,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,uBAAuB;AAC3B;AACA;IACI,aAAa;IACb,mBAAmB;IACnB,SAAS;AACb;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,wBAAwB;IACxB,aAAa;IACb,aAAa;IACb,gCAAgC;IAChC,mBAAmB;AACvB;;AAEA;IACI,MAAM;IACN,SAAS;IACT,OAAO;IACP,QAAQ;IACR,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,WAAW;IACX;mBACe;IACf,uBAAuB;IACvB,uBAAuB;IACvB,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,wBAAwB;IACxB,aAAa;IACb,eAAe;AACnB;AACA;IACI,YAAY;IACZ,aAAa;IACb,qBAAqB;IACrB,SAAS;AACb;;AAEA;IACI,YAAY;IACZ,uBAAuB;IACvB,eAAe;AACnB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,YAAY;IACZ,aAAa;IACb,aAAa;IACb,sBAAsB;IACtB,wBAAwB;AAC5B;;AAEA;IACI,OAAO;IACP,aAAa;AACjB;;AAEA;IACI,OAAO;IACP,sBAAsB;IACtB,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;AACnB;;;;AAIA;IACI,uBAAuB;IACvB,uBAAuB;IACvB,sBAAsB;AAC1B;;;AAGA;IACI,uBAAuB;AAC3B;;AAEA;IACI,+BAA+B;AACnC;;AAEA;IACI,sBAAsB;AAC1B;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;IACI,2BAA2B;AAC/B;;;AAGA;IACI,0BAA0B;;AAE9B;;AAEA;IACI,uBAAuB;AAC3B",sourcesContent:["body {\n    margin: 0 auto;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: black;\n}\n.container {\n    display: flex;\n    flex-direction: row;\n    gap: 40px;\n}\n\n.clickable {\n    cursor: pointer;\n}\n\n.popup {\n    /* position: absolute; */\n    width: 1500px;\n    height: 700px;\n    background-color: cornflowerblue;\n    /* display: none; */\n}\n\n.blocker {\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    content: '';\n    position: fixed;\n}\n\n.pregame-space {\n    margin: 1px;\n    /* width: 30px;\n    height: 30px; */\n    border: black 1px solid;\n    background-color: white;\n    cursor: pointer;\n}\n\n.pregame-container {\n    display: flex;\n    flex-direction: row;\n    position: relative;\n}\n\n.start-button {\n    background-color: bisque;\n    display: none;\n    cursor: pointer;\n}\n.ship-container {\n    height: auto;\n    display: flex;\n    flex-direction:column;\n    gap: 20px;\n}\n\n.ship {\n    height: 30px;\n    background-color: white;\n    cursor: pointer;\n}\n\n.carrier {\n    width: 150px;\n}\n\n.battleship {\n    width: 120px;\n}\n\n.cruiser, .submarine {\n    width: 90px;\n}\n\n.destroyer {\n    width: 60px;\n}\n\n.gameboard-container, .initial-grid {\n    width: 500px;\n    height: 500px;\n    display: flex;\n    flex-direction: column;\n    background-color: bisque;\n}\n\n.row {\n    flex: 1;\n    display: flex;\n}\n\n.column {\n    flex: 1;\n    background-color: grey;\n    text-align: center;\n    line-height:50px;\n    font-size: 40px;\n}\n\n\n\n.selected-ship-off-grid {\n    background-color: beige;\n    border: white solid 2px;\n    box-sizing: border-box;\n}\n\n\n.ship-in-space {\n    background-color: white;\n}\n\n.grey-out {\n    background-color: darkslategrey;\n}\n\n.valid-hovering {\n    background-color: aqua;\n}\n\n.invalid-hovering {\n    background-color: coral;\n}\n\n.ship-head-hover {\n    background-color: goldenrod;\n}\n\n\n.selected-ship-on-grid {\n    background-color: darkgrey;\n    \n}\n\n.game-hovering {\n    background-color: white;\n}"],sourceRoot:""}]);const s=a},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),n.push(d))}},n}},537:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[n].concat([i]).join("\n")}return[n].join("\n")}},379:e=>{var n=[];function t(e){for(var t=-1,o=0;o<n.length;o++)if(n[o].identifier===e){t=o;break}return t}function o(e,o){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=o.base?c[0]+o.base:c[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var A=t(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==A)n[A].references++,n[A].updater(h);else{var p=r(h,o);o.byIndex=s,n.splice(s,0,{identifier:u,updater:p,references:1})}a.push(u)}return a}function r(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=t(i[a]);n[s].references--}for(var c=o(e,r),l=0;l<i.length;l++){var d=t(i[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}i=c}}},569:e=>{var n={};e.exports=function(e,t){var o=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(o,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={id:o,exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0,(()=>{var e=t(379),n=t.n(e),o=t(795),r=t.n(o),i=t(569),a=t.n(i),s=t(565),c=t.n(s),l=t(216),d=t.n(l),u=t(589),A=t.n(u),h=t(426),p={};p.styleTagTransform=A(),p.setAttributes=c(),p.insert=a().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=d(),n()(h.Z,p),h.Z&&h.Z.locals&&h.Z.locals;class f{constructor(e){this.length=e,this.hits=0,this.sunk=!1}setSunk(){this.sunk=!0}hit(){this.hits++}isSunk(){this.length===this.hits&&this.setSunk()}}class g{constructor(){this.hasShip=!1,this.wasGuessed=!1,this.missedHit=!1,this.ship=null}}class m{constructor(){this.grid=function(){let e=[];for(let n=0;n<10;n++){let n=[];for(let e=0;e<10;e++){const e=new g;n.push(e)}e.push(n)}return e}(),this.allShipCoords=[],this.guessedCoords=[]}isOutOfBounds(e,n){return e>9||n>9}checkIfAlreadyPlaced(e,n){return!0===this.grid[n][e].hasShip}populateShipCoordsArray(e,n){this.allShipCoords.push([e,n])}placeShip(e,n,[t,o]){let r=!1;if(this.isOutOfBounds(t,o))return"out of bounds";let i=function(e){if(!(e<1||e>5))return new f(e)}(e);if(i)switch(n){case"horizontal":for(let n=0;n<e;n++){if(console.log(t+n,o),this.isOutOfBounds(t+n,o))return void(r=!0);if(this.checkIfAlreadyPlaced(t+n,o))return r=!0,"position already occupied: tried horizontal"}if(!r)for(let n=0;n<e;n++)this.grid[o][t+n].hasShip=!0,this.grid[o][t+n].ship=i,this.populateShipCoordsArray(t+n,o);break;case"vertical":for(let n=0;n<e;n++){if(this.isOutOfBounds(t,o+n))return void(r=!0);if(this.checkIfAlreadyPlaced(t,o+n))return r=!0,"position already occupied: tried vertical"}if(!r)for(let n=0;n<e;n++)this.grid[o+n][t].hasShip=!0,this.grid[o+n][t].ship=i,this.populateShipCoordsArray(t,o+n)}}getPosition(e,n){return this.grid[n][e]}checkShipExists(e,n){return this.grid[n][e].hasShip}getShip(e,n){return this.grid[n][e].ship}checkMissedHit(e,n){return this.grid[n][e].missedHit}checkWasGuessed(e,n){return this.grid[n][e].wasGuessed}checkIsGameOver(){let e=this.allShipCoords.map((e=>JSON.stringify(e))),n=this.guessedCoords.map((e=>JSON.stringify(e)));return console.log(e),console.log(n),console.log(e.every((e=>n.includes(e)))),e.every((e=>n.includes(e)))}receiveAttack(e,n){if(this.checkWasGuessed(e,n))return"already attacked";this.getPosition(e,n).wasGuessed=!0,this.guessedCoords.push([e,n]),this.checkShipExists(e,n)?(this.getShip(e,n).hit(),this.getShip(e,n).isSunk()):this.getPosition(e,n).missedHit=!0}}class v{constructor(e){}attack(e,[n,t]){e.receiveAttack(n,t)}}class b extends v{constructor(){super()}randomAttack(e){const n=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());e.checkWasGuessed(n,t)||this.attack(e,[n,t])}}console.log("uh hello?"),function(){let e=function(){let e=new m,n=new m;const t=()=>n,o=new v,r=new b;let i=o,a=n,s=!1;function c(e){let n=JSON.stringify(t().allShipCoords),o=n;function r(){return["horizontal","vertical"][Math.round(Math.random())]}function i(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}let a=!1;for(;!a;)"horizontal"===r()?(console.log("try horizontal placement"),t().placeShip(e,"horizontal",i()),o=JSON.stringify(t().allShipCoords),n!==o&&(a=!0),console.log(a)):"vertical"===r()&&(console.log("try vertical placement"),t().placeShip(e,"vertical",i()),o=JSON.stringify(t().allShipCoords),n!==o&&(a=!0),console.log(a))}function l(){i=i===o?r:o,a=a===e?n:e}function d(e){e.checkIsGameOver()&&(s=!0)}return c(5),c(4),c(3),c(3),c(2),{playRound:function(e=null){switch(i){case o:console.log("player"),i.attack(a,e),d(a),l();break;case r:console.log("computer"),function(){let e=JSON.stringify(a.guessedCoords),n=e,t=!1;for(;!t;)i.randomAttack(a),n=JSON.stringify(a.guessedCoords),e!==n&&(t=!0)}(),d(a),l()}},getPlayerGameboard:()=>e,getComputerGameboard:t,getIsGameOver:()=>s}}(),n=null,t=!1,o=!1;function r(){o=!1}function i(){t=!1}function a(e,n){switch(!0){case e.contains("carrier"):return n("carrier");case e.contains("battleship"):return n("battleship");case e.contains("cruiser"):return n("cruiser");case e.contains("submarine"):return n("submarine");case e.contains("destroyer"):return n("destroyer")}}let s={carrier:{length:5,orientation:"horizontal",isPlaced:!1},battleship:{length:4,orientation:"horizontal",isPlaced:!1},cruiser:{length:3,orientation:"horizontal",isPlaced:!1},submarine:{length:3,orientation:"horizontal",isPlaced:!1},destroyer:{length:2,orientation:"horizontal",isPlaced:!1}};function c(){return s[n].orientation}function l(){return s[n].isPlaced=!0}function d(){return n}function u(e){n=e}function A(e){a(e.classList,u)}function h(){n=null}function p(){return s[n].length}let f=document.querySelector("body");function g(e,n=null,t=null,...o){const r=document.createElement(e);return o.forEach((e=>r.classList.add(e))),n&&(r.textContent=n),t&&t.appendChild(r),r}function C(e){let n=document.querySelectorAll(`.${e}`);n&&n.forEach((n=>{n.classList.remove(e)}))}function y(){C("valid-hovering"),C("invalid-hovering"),C("ship-head-hover")}function I(){let e=document.querySelector(".selected-ship-off-grid");e&&e.classList.remove("selected-ship-off-grid")}function k(e,n){document.querySelector(`[data-col="${e}"][data-row="${n}"]`).classList.add("valid-hovering")}function B(e,n){document.querySelector(`[data-col="${e}"][data-row="${n}"]`).classList.add("invalid-hovering")}function x(e){!function(e){let n=!1;const t=parseInt(e.dataset.row),o=parseInt(e.dataset.col);let r=p();if("horizontal"===c()){for(let e=o;e<o+r;e++)if(e>9||z(e,t)){n=!0;break}if(n){if(n)for(let e=o;e<o+r&&!(e>9);e++)B(e,t)}else for(let e=o;e<o+r;e++)k(e,t)}else if("vertical"===c()){for(let e=t;e<t+r;e++)if(e>9||z(o,e)){n=!0;break}if(n){if(n)for(let e=t;e<t+r&&!(e>9);e++)B(o,e)}else for(let e=t;e<t+r;e++)k(o,e)}}(e)}function S(e,n){let t=document.querySelector(`[data-col="${e}"][data-row="${n}"]`);t.classList.add("ship-in-space"),t.classList.add(d())}function w(e){e.classList.add("ship-head")}function E(){const e=document.querySelector(`.ship-head.${d()}`);e&&e.classList.remove("ship-head")}function L(e){return e.classList.contains("ship-head")}function q(){document.querySelectorAll(".selected-ship-on-grid").forEach((e=>{e.classList.remove("selected-ship-on-grid")}))}function O(){let e=document.querySelector("i");e.parentNode.removeChild(e)}function G(e){let n=!1;const t=parseInt(e.dataset.row),r=parseInt(e.dataset.col);let i=p();if("horizontal"===c()&&!o||"vertical"===c()&&o){for(let e=r;e<r+i;e++)if(e>9||z(e,t)){n=!0;break}if(!n)for(let e=r;e<r+i;e++)S(e,t)}else if("vertical"===c()&&!o||"horizontal"==c()&&o){for(let e=t;e<t+i;e++)if(e>9||z(r,e)){n=!0;break}if(!n)for(let e=t;e<t+i;e++)S(r,e)}}function z(e,n){return document.querySelector(`[data-col="${e}"][data-row="${n}"]`).classList.contains("ship-in-space")}function M(e){let n=!1;const t=p(),r=parseInt(e.dataset.row),i=parseInt(e.dataset.col);if(console.log(c()),console.log(o),"horizontal"===c()&&!o||"vertical"===c()&&L(e)){for(let e=i+1;e<i+t;e++)if(e>9||z(e,r)){n=!0;break}}else if("vertical"===c()&&!o||"horizontal"==c()&&L(e))for(let e=r+1;e<r+t;e++)if(e>9||z(i,e)){n=!0;break}return n}function P(e){document.querySelector(".initial-grid").querySelectorAll(`.${e}`).forEach((n=>{n.classList.remove(e),n.classList.remove("ship-in-space")}))}function N(){console.log(`remove current ship from grid: ${d()}`),P(d())}function $(){let e=!0;for(let n in s)!1===s[n].isPlaced&&(e=!1);e&&function(){const e=document.querySelector(".start-button");e.style.display="block",console.log(e)}()}function T(e,n){if(!e.hasShip&&!e.wasGuessed)return" ";e.hasShip&&!e.wasGuessed&&(n.textContent="."),!e.hasShip&&e.wasGuessed&&(n.textContent="Â·"),e.hasShip&&e.wasGuessed&&function(e,n){const t=document.querySelector("#x-template").content.cloneNode(!0);e.appendChild(t.children[0])}(n)}function W(){!function(e){let n=document.querySelector(".gameboard-container.right");e.grid.map(((e,t)=>{let o=g("div",null,n,"row");e.map((e=>{let n=g("div",null,o,"column");console.log(e),T(e,n)}))}))}(e.getPlayerGameboard()),function(e){let n=document.querySelector(".gameboard-container.left");e.grid.map(((e,t)=>{let o=g("div",null,n,"row");e.map(((e,n)=>{let r=g("div",null,o,"column",function(e){return e.hasShip||e.wasGuessed?e.hasShip&&!e.wasGuessed?"clickable":!e.hasShip&&e.wasGuessed||e.hasShip&&e.wasGuessed?"unclickable":void 0:"clickable"}(e));T(e,r),r.dataset.col=n,r.dataset.row=t}))}))}(e.getComputerGameboard())}function Y(){document.querySelectorAll(".gameboard-container").forEach((e=>e.textContent=""))}f.addEventListener("mouseover",(e=>{e.target.classList.contains("pregame-space")&&(y(),n&&x(e.target),a(e.target.classList,(function(e){document.querySelector(`.${e}.ship-head`).classList.add("ship-head-hover")})))})),f.addEventListener("mouseover",(e=>{e.target.classList.contains("ship-head")&&o&&function(e){const n=p();let t=!1;const o=parseInt(e.dataset.col),r=parseInt(e.dataset.row);if("horizontal"===c()){for(let e=r+1;e<r+n;e++)(e>9||z(o,e))&&(t=!0);if(t)for(let e=r;e<r+n&&!(e>9);e++)B(o,e);if(!t)for(let e=r;e<r+n;e++)k(o,e)}else if("vertical"===c()){for(let e=o+1;e<o+n;e++)(e>9||z(e,r))&&(t=!0);if(t)for(let e=o;e<o+n&&!(e>9);e++)B(e,r);if(!t)for(let e=o;e<o+n;e++)k(e,r)}}(e.target)})),document.querySelector(".initial-grid").addEventListener("mouseleave",(()=>{y()})),f.addEventListener("click",(e=>{if(e.target.classList.contains("ship-head")){function l(e){e.querySelector("i")&&e.removeChild(e.querySelector("i"));const n=document.querySelector("#rotate-template").content.cloneNode(!0);e.appendChild(n.children[0])}if(o){if(o){if(M(e.target))return;N(),q(),O(),G(e.target),y(),console.log(c()),s[n].orientation="horizontal"===s[n].orientation?"vertical":"horizontal",console.log(c()),h(),r(),i(),console.log("ship head CLICKED and disable rotate mode and reset current ship")}}else console.log("ship head CLICKED and in NOW in rotate mode"),o=!0,t=!0,A(e.target),a(e.target.classList,(function(e){document.querySelector(".initial-grid").querySelectorAll(`.${e}`).forEach((e=>{e.classList.add("selected-ship-on-grid")}))})),l(e.target),x(e.target)}})),f.addEventListener("click",(e=>{if(n&&e.target.classList.contains("pregame-space")){if(M(e.target))return;t?(console.log("ship is MOVING"),L(e.target)?L(e.target)&&console.log("ship head was clicked"):(console.log("ship head NOT clicked, ship is moving"),E(),O(),q(),N(),i(),r(),G(e.target),y(),w(e.target),l(),h(),$())):(console.log("ship NOT moving, placing for the first time"),document.querySelector(".selected-ship-off-grid").classList.add("grey-out"),I(),G(e.target),y(),w(e.target),l(),h(),$())}})),f.addEventListener("click",(e=>{let n=e.target.classList;n.contains("ship")&&(n.contains("grey-out")&&a(e.target.classList,P),I(),E(),y(),n.add("selected-ship-off-grid"),A(e.target))})),f.addEventListener("click",(n=>{n.target.classList.contains("start-button")&&(console.log("927"),document.querySelectorAll(".ship-head").forEach((n=>{let[t,o]=a(n.classList,(e=>[s[e].length,s[e].orientation]));e.getPlayerGameboard().placeShip(t,o,[parseInt(n.dataset.col),parseInt(n.dataset.row)])})),document.querySelector(".popup").style.display="none",W())})),f.addEventListener("mouseover",(e=>{e.target.classList.contains("clickable")&&(C("game-hovering"),e.target.classList.add("game-hovering"))})),function(){let e=document.querySelector(".initial-grid");for(let n=0;n<10;n++){let t=g("div",null,e,"row");for(let e=0;e<10;e++){let o=g("div","",t,"column","pregame-space");o.dataset.row=n,o.dataset.col=e}}}(),f.addEventListener("click",(n=>{if(n.target.classList.contains("clickable")){const t=n.target.dataset;e.playRound([parseInt(t.col),parseInt(t.row)]),Y(),W(),e.getIsGameOver()?document.querySelectorAll(".clickable").forEach((e=>{e.classList.remove("clickable"),e.classList.add("unclickable")})):(console.log("b"),e.playRound(),Y(),W())}}))}()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUssSUFBSXZELEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUFLLENBQ3pCLElBQUl1USxFQUFheEQsRUFBb0IsTUFBTyxLQUFNb0UsRUFBYSxPQUMvRCxJQUFLLElBQUkzSixFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFBSyxDQUN6QixJQUFJZ0osRUFBZXpELEVBQW9CLE1BQU8sR0FBSXdELEVBQVksU0FBVSxpQkFDeEVDLEVBQWFqQyxRQUFRaEgsSUFBTXZILEVBQzNCd1EsRUFBYWpDLFFBQVF6RyxJQUFNTixDQUMvQixDQUNKLENBQ0osQ0E4a0JBNEosR0FzQkF0RSxFQUFZaUUsaUJBQWlCLFNBQVVqQixJQUNuQyxHQUFJQSxFQUFHMU0sT0FBT3VKLFVBQVVSLFNBQVMsYUFBYyxDQUMzQyxNQUFNMEIsRUFBUWlDLEVBQUcxTSxPQUFPbUwsUUFDeEJwRSxFQUFlZ0IsVUFBVSxDQUFDbUQsU0FBU1QsRUFBTS9GLEtBQU13RyxTQUFTVCxFQUFNdEcsT0FDOURzSixJQUNBVCxJQWxCR2pHLEVBQWV1QixnQkFLSnBJLFNBQVNzSyxpQkFBaUIsY0FDbENQLFNBQVF5QyxJQUNkQSxFQUFHbkQsVUFBVWpLLE9BQU8sYUFDcEJvTixFQUFHbkQsVUFBVVksSUFBSSxjQUFhLEtBYzFCL0UsUUFBUUMsSUFBSSxLQUNaMEIsRUFBZWdCLFlBQ2YwRixJQUNBVCxJQUVSLElBRVIsQ0RudUJBaUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3N0eWxlLmNzcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zdHlsZS5jc3M/NzE2MyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZGlzcGxheUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYGJvZHkge1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbn1cbi5jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICBnYXA6IDQwcHg7XG59XG5cbi5jbGlja2FibGUge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnBvcHVwIHtcbiAgICAvKiBwb3NpdGlvbjogYWJzb2x1dGU7ICovXG4gICAgd2lkdGg6IDE1MDBweDtcbiAgICBoZWlnaHQ6IDcwMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IGNvcm5mbG93ZXJibHVlO1xuICAgIC8qIGRpc3BsYXk6IG5vbmU7ICovXG59XG5cbi5ibG9ja2VyIHtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgY29udGVudDogJyc7XG4gICAgcG9zaXRpb246IGZpeGVkO1xufVxuXG4ucHJlZ2FtZS1zcGFjZSB7XG4gICAgbWFyZ2luOiAxcHg7XG4gICAgLyogd2lkdGg6IDMwcHg7XG4gICAgaGVpZ2h0OiAzMHB4OyAqL1xuICAgIGJvcmRlcjogYmxhY2sgMXB4IHNvbGlkO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnByZWdhbWUtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uc3RhcnQtYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBiaXNxdWU7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG4uc2hpcC1jb250YWluZXIge1xuICAgIGhlaWdodDogYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjtcbiAgICBnYXA6IDIwcHg7XG59XG5cbi5zaGlwIHtcbiAgICBoZWlnaHQ6IDMwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uY2FycmllciB7XG4gICAgd2lkdGg6IDE1MHB4O1xufVxuXG4uYmF0dGxlc2hpcCB7XG4gICAgd2lkdGg6IDEyMHB4O1xufVxuXG4uY3J1aXNlciwgLnN1Ym1hcmluZSB7XG4gICAgd2lkdGg6IDkwcHg7XG59XG5cbi5kZXN0cm95ZXIge1xuICAgIHdpZHRoOiA2MHB4O1xufVxuXG4uZ2FtZWJvYXJkLWNvbnRhaW5lciwgLmluaXRpYWwtZ3JpZCB7XG4gICAgd2lkdGg6IDUwMHB4O1xuICAgIGhlaWdodDogNTAwcHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGJpc3F1ZTtcbn1cblxuLnJvdyB7XG4gICAgZmxleDogMTtcbiAgICBkaXNwbGF5OiBmbGV4O1xufVxuXG4uY29sdW1uIHtcbiAgICBmbGV4OiAxO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGxpbmUtaGVpZ2h0OjUwcHg7XG4gICAgZm9udC1zaXplOiA0MHB4O1xufVxuXG5cblxuLnNlbGVjdGVkLXNoaXAtb2ZmLWdyaWQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IGJlaWdlO1xuICAgIGJvcmRlcjogd2hpdGUgc29saWQgMnB4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cblxuLnNoaXAtaW4tc3BhY2Uge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xufVxuXG4uZ3JleS1vdXQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtzbGF0ZWdyZXk7XG59XG5cbi52YWxpZC1ob3ZlcmluZyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogYXF1YTtcbn1cblxuLmludmFsaWQtaG92ZXJpbmcge1xuICAgIGJhY2tncm91bmQtY29sb3I6IGNvcmFsO1xufVxuXG4uc2hpcC1oZWFkLWhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBnb2xkZW5yb2Q7XG59XG5cblxuLnNlbGVjdGVkLXNoaXAtb24tZ3JpZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogZGFya2dyZXk7XG4gICAgXG59XG5cbi5nYW1lLWhvdmVyaW5nIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSxjQUFjO0lBQ2QsWUFBWTtJQUNaLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsbUJBQW1CO0lBQ25CLHVCQUF1QjtBQUMzQjtBQUNBO0lBQ0ksYUFBYTtJQUNiLG1CQUFtQjtJQUNuQixTQUFTO0FBQ2I7O0FBRUE7SUFDSSxlQUFlO0FBQ25COztBQUVBO0lBQ0ksd0JBQXdCO0lBQ3hCLGFBQWE7SUFDYixhQUFhO0lBQ2IsZ0NBQWdDO0lBQ2hDLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLFFBQVE7SUFDUixXQUFXO0lBQ1gsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFdBQVc7SUFDWDttQkFDZTtJQUNmLHVCQUF1QjtJQUN2Qix1QkFBdUI7SUFDdkIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksd0JBQXdCO0lBQ3hCLGFBQWE7SUFDYixlQUFlO0FBQ25CO0FBQ0E7SUFDSSxZQUFZO0lBQ1osYUFBYTtJQUNiLHFCQUFxQjtJQUNyQixTQUFTO0FBQ2I7O0FBRUE7SUFDSSxZQUFZO0lBQ1osdUJBQXVCO0lBQ3ZCLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFdBQVc7QUFDZjs7QUFFQTtJQUNJLFdBQVc7QUFDZjs7QUFFQTtJQUNJLFlBQVk7SUFDWixhQUFhO0lBQ2IsYUFBYTtJQUNiLHNCQUFzQjtJQUN0Qix3QkFBd0I7QUFDNUI7O0FBRUE7SUFDSSxPQUFPO0lBQ1AsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLE9BQU87SUFDUCxzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLGdCQUFnQjtJQUNoQixlQUFlO0FBQ25COzs7O0FBSUE7SUFDSSx1QkFBdUI7SUFDdkIsdUJBQXVCO0lBQ3ZCLHNCQUFzQjtBQUMxQjs7O0FBR0E7SUFDSSx1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSwrQkFBK0I7QUFDbkM7O0FBRUE7SUFDSSxzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSx1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSwyQkFBMkI7QUFDL0I7OztBQUdBO0lBQ0ksMEJBQTBCOztBQUU5Qjs7QUFFQTtJQUNJLHVCQUF1QjtBQUMzQlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJib2R5IHtcXG4gICAgbWFyZ2luOiAwIGF1dG87XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XFxufVxcbi5jb250YWluZXIge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgICBnYXA6IDQwcHg7XFxufVxcblxcbi5jbGlja2FibGUge1xcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcblxcbi5wb3B1cCB7XFxuICAgIC8qIHBvc2l0aW9uOiBhYnNvbHV0ZTsgKi9cXG4gICAgd2lkdGg6IDE1MDBweDtcXG4gICAgaGVpZ2h0OiA3MDBweDtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogY29ybmZsb3dlcmJsdWU7XFxuICAgIC8qIGRpc3BsYXk6IG5vbmU7ICovXFxufVxcblxcbi5ibG9ja2VyIHtcXG4gICAgdG9wOiAwO1xcbiAgICBib3R0b206IDA7XFxuICAgIGxlZnQ6IDA7XFxuICAgIHJpZ2h0OiAwO1xcbiAgICBjb250ZW50OiAnJztcXG4gICAgcG9zaXRpb246IGZpeGVkO1xcbn1cXG5cXG4ucHJlZ2FtZS1zcGFjZSB7XFxuICAgIG1hcmdpbjogMXB4O1xcbiAgICAvKiB3aWR0aDogMzBweDtcXG4gICAgaGVpZ2h0OiAzMHB4OyAqL1xcbiAgICBib3JkZXI6IGJsYWNrIDFweCBzb2xpZDtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG59XFxuXFxuLnByZWdhbWUtY29udGFpbmVyIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG4uc3RhcnQtYnV0dG9uIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmlzcXVlO1xcbiAgICBkaXNwbGF5OiBub25lO1xcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcbi5zaGlwLWNvbnRhaW5lciB7XFxuICAgIGhlaWdodDogYXV0bztcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246Y29sdW1uO1xcbiAgICBnYXA6IDIwcHg7XFxufVxcblxcbi5zaGlwIHtcXG4gICAgaGVpZ2h0OiAzMHB4O1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4uY2FycmllciB7XFxuICAgIHdpZHRoOiAxNTBweDtcXG59XFxuXFxuLmJhdHRsZXNoaXAge1xcbiAgICB3aWR0aDogMTIwcHg7XFxufVxcblxcbi5jcnVpc2VyLCAuc3VibWFyaW5lIHtcXG4gICAgd2lkdGg6IDkwcHg7XFxufVxcblxcbi5kZXN0cm95ZXIge1xcbiAgICB3aWR0aDogNjBweDtcXG59XFxuXFxuLmdhbWVib2FyZC1jb250YWluZXIsIC5pbml0aWFsLWdyaWQge1xcbiAgICB3aWR0aDogNTAwcHg7XFxuICAgIGhlaWdodDogNTAwcHg7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGJhY2tncm91bmQtY29sb3I6IGJpc3F1ZTtcXG59XFxuXFxuLnJvdyB7XFxuICAgIGZsZXg6IDE7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxufVxcblxcbi5jb2x1bW4ge1xcbiAgICBmbGV4OiAxO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmV5O1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIGxpbmUtaGVpZ2h0OjUwcHg7XFxuICAgIGZvbnQtc2l6ZTogNDBweDtcXG59XFxuXFxuXFxuXFxuLnNlbGVjdGVkLXNoaXAtb2ZmLWdyaWQge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBiZWlnZTtcXG4gICAgYm9yZGVyOiB3aGl0ZSBzb2xpZCAycHg7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxufVxcblxcblxcbi5zaGlwLWluLXNwYWNlIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxufVxcblxcbi5ncmV5LW91dCB7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtzbGF0ZWdyZXk7XFxufVxcblxcbi52YWxpZC1ob3ZlcmluZyB7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IGFxdWE7XFxufVxcblxcbi5pbnZhbGlkLWhvdmVyaW5nIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogY29yYWw7XFxufVxcblxcbi5zaGlwLWhlYWQtaG92ZXIge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBnb2xkZW5yb2Q7XFxufVxcblxcblxcbi5zZWxlY3RlZC1zaGlwLW9uLWdyaWQge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrZ3JleTtcXG4gICAgXFxufVxcblxcbi5nYW1lLWhvdmVyaW5nIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTtcblxuICAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gXCJcIjtcbiAgICAgIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2YgaXRlbVs1XSAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKTtcbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcblxuICAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICBsaXN0LmkgPSBmdW5jdGlvbiBpKG1vZHVsZXMsIG1lZGlhLCBkZWR1cGUsIHN1cHBvcnRzLCBsYXllcikge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgdW5kZWZpbmVkXV07XG4gICAgfVxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXNba11bMF07XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBtb2R1bGVzLmxlbmd0aDsgX2srKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfa10pO1xuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBsYXllciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1bNV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtZWRpYSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3VwcG9ydHMpIHtcbiAgICAgICAgaWYgKCFpdGVtWzRdKSB7XG4gICAgICAgICAgaXRlbVs0XSA9IFwiXCIuY29uY2F0KHN1cHBvcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNF0gPSBzdXBwb3J0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG5cbiAgICAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cbiAgY3NzICs9IG9iai5jc3M7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH1cblxuICAvLyBGb3Igb2xkIElFXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcbmNsYXNzIFNoaXAge1xuICAgIC8vIGkgbmVlZCB0byBtYWtlIHN1cmUgbGVuZ3RoIGlzIGJldHdlZW4gMSBhbmQgNFxuICAgIGNvbnN0cnVjdG9yKGxlbmd0aCkge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5oaXRzID0gMDtcbiAgICAgICAgdGhpcy5zdW5rID0gZmFsc2U7XG4gICAgfVxuXG4gICAgc2V0U3VuaygpIHtcbiAgICAgICAgdGhpcy5zdW5rID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBoaXQoKSB7XG4gICAgICAgIHRoaXMuaGl0cyArK1xuICAgIH1cblxuICAgIGlzU3VuaygpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSB0aGlzLmhpdHMpIHRoaXMuc2V0U3VuaygpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGlzZVNoaXAobGVuZ3RoKSB7XG4gICAgaWYgKGxlbmd0aCA8IDEgfHwgbGVuZ3RoID4gNSkgcmV0dXJuIFxuICAgIHJldHVybiBuZXcgU2hpcChsZW5ndGgpXG59XG5cblxuZXhwb3J0IHtpbml0aWFsaXNlU2hpcCwgU2hpcH0iLCJpbXBvcnQgeyBTaGlwLCBpbml0aWFsaXNlU2hpcCB9IGZyb20gXCIuL3NoaXBcIjtcblxuY2xhc3MgU3BhY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhhc1NoaXAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53YXNHdWVzc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWlzc2VkSGl0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2hpcCA9IG51bGw7XG4gICAgfVxufVxuXG4vLyBub3Qgc3VyZSB3aGVyZSB0byBwdXQgdGhpcyBidXQgbmVlZCB0byBiZSBjYXJlZnVsIGFib3V0IG9yZGluYXRlIG9yZGVyOyBjb2wscm93IHZzIHJvdywgY29sXG4vLyB1c2UgY29sLHJvdyBmb3IgbWV0aG9kIGFyZ3VtZW50cyBhbmQgcHVzaGluZyBpbnRvIHZhcmlhYmxlcyBsaWtlIGd1ZXNzZWRDb29yZHNcbi8vIHVzZSByb3csIGNvbCBmb3IgZ2FtZWJvYXJkIGxvZ2ljXG5jbGFzcyBHYW1lYm9hcmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVHcmlkKCkge1xuICAgICAgICAgICAgbGV0IG5ld0dyaWQgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpPDEwOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGo8MTA7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBuZXcgU3BhY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LnB1c2goc3F1YXJlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdHcmlkLnB1c2gocm93KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ld0dyaWRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdyaWQgPSBjcmVhdGVHcmlkKCk7XG4gICAgICAgIHRoaXMuYWxsU2hpcENvb3JkcyA9IFtdO1xuICAgICAgICB0aGlzLmd1ZXNzZWRDb29yZHMgPSBbXTtcbiAgICB9XG5cbiAgICBpc091dE9mQm91bmRzKGNvbCwgcm93KSB7XG4gICAgICAgIGlmIChjb2wgPiA5IHx8IHJvdyA+IDkpIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY2hlY2tJZkFscmVhZHlQbGFjZWQoY29sLCByb3cpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coY29sLCByb3cpXG4gICAgICAgIC8vIHNvIGFyZSBoYXNTaGlwIG5vdCB0cnVlP1xuICAgICAgICAvLyB0aGlzLmdyaWQsIGlzIGl0IGRpZmZlcmVudCB0byBjb21wdXRlckdhbWVib2FyZFxuICAgICAgICAvLyBpcyB0aGlzLmdyaWRbcm93XVtjb2xdIGEgc3BhY2U/XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ3JpZFtyb3ddW2NvbF0pXG4gICAgICAgIGlmICh0aGlzLmdyaWRbcm93XVtjb2xdLmhhc1NoaXAgPT09IHRydWUpIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBzb21laG93IHRoaXMgaXMgbm90IHdvcmtpbmcgYXMgZXhwZWN0ZWRcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHBvcHVsYXRlU2hpcENvb3Jkc0FycmF5KGNvbCwgcm93KSB7XG4gICAgICAgIHRoaXMuYWxsU2hpcENvb3Jkcy5wdXNoKFtjb2wsIHJvd10pXG4gICAgfVxuXG4gICAgcGxhY2VTaGlwKGxlbmd0aCwgb3JpZW50YXRpb24sIFtzdGFydENvbCwgc3RhcnRSb3ddKSB7XG4gICAgICAgIGxldCBpbnZhbGlkUGxhY2VtZW50ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gdGVzdCBpZiBzdGFydCBjb29yZCBpcyBvdXQgb2YgYm91bmRzXG4gICAgICAgIGlmICh0aGlzLmlzT3V0T2ZCb3VuZHMoc3RhcnRDb2wsIHN0YXJ0Um93KSkgcmV0dXJuICdvdXQgb2YgYm91bmRzJztcblxuICAgICAgICBsZXQgbmV3U2hpcCA9IGluaXRpYWxpc2VTaGlwKGxlbmd0aCk7XG4gICAgICAgIGlmICghbmV3U2hpcCkgcmV0dXJuO1xuXG4gICAgICAgIHN3aXRjaChvcmllbnRhdGlvbikge1xuICAgICAgICAgICAgLy8gaWYgb3JpZW50YXRpb24gaXMgaG9yaXpvbnRhbFxuICAgICAgICAgICAgLy8gc3R1ZmYgaGFwcGVucyBmcm9tIGxlZnQgdG8gcmlnaHRcbiAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgIC8vbG9vcCBmb3IgbGVuZ3RoIGFuZCBjaGVjayBpZiBvdXQgb2YgYm91bmRzIG9yIGFscmVhZHkgb2NjdXBpZWQ7IGlmIHNvIGNhbmNlbCBleGVjdXRpb25cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaTwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RhcnRDb2wgKyBpLCBzdGFydFJvdylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPdXRPZkJvdW5kcyhzdGFydENvbCArIGksIHN0YXJ0Um93KSkgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRQbGFjZW1lbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrSWZBbHJlYWR5UGxhY2VkKHN0YXJ0Q29sICsgaSwgc3RhcnRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkUGxhY2VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncG9zaXRpb24gYWxyZWFkeSBvY2N1cGllZDogdHJpZWQgaG9yaXpvbnRhbCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBlbHNlLCBsb29wIGFsb25nIHRoZSByb3cgKG9jY3VweSBjb2x1bW5zIG9mIHRoZSBzYW1lIHJvdylcbiAgICAgICAgICAgICAgICAvLyBhdCBlYWNoIGdyaWQgc3F1YXJlLCBvY2N1cHkgd2l0aCBzaGlwIElEXG4gICAgICAgICAgICAgICAgaWYgKCFpbnZhbGlkUGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRbc3RhcnRSb3ddW3N0YXJ0Q29sICsgaV0uaGFzU2hpcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFtzdGFydFJvd11bc3RhcnRDb2wgKyBpXS5zaGlwID0gbmV3U2hpcDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVNoaXBDb29yZHNBcnJheShzdGFydENvbCArIGksIHN0YXJ0Um93KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIC8vIGlmIG9yaWVudGF0aW9uIGlzIHZlcnRpY2FsXG4gICAgICAgICAgICAvLyBzaGlwIGlzIGNyZWF0ZWQgZnJvbSBib3R0b20gdG8gdG9wXG4gICAgICAgICAgICAvLyByb3dbMF0gaXMgYm90dG9tLCByb3dbOV0gdG8gdG9wLCBkdWUgdG8gdGhlIGA5IC0gYFxuICAgICAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc091dE9mQm91bmRzKHN0YXJ0Q29sLCBzdGFydFJvdyArIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkUGxhY2VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0lmQWxyZWFkeVBsYWNlZChzdGFydENvbCwgc3RhcnRSb3cgKyBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFBsYWNlbWVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3Bvc2l0aW9uIGFscmVhZHkgb2NjdXBpZWQ6IHRyaWVkIHZlcnRpY2FsJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gYW5kIHRoZW4gcHV0IHN0dWZmIGFsb25nIHRoZSBjb2x1bW4gKG9jY3VweSByb3dzIG9mIHRoZSBzYW1lIGNvbHVtbilcbiAgICAgICAgICAgICAgICBpZiAoIWludmFsaWRQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGk8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRbc3RhcnRSb3cgKyBpXVtzdGFydENvbF0uaGFzU2hpcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRbc3RhcnRSb3cgKyBpXVtzdGFydENvbF0uc2hpcCA9IG5ld1NoaXA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVTaGlwQ29vcmRzQXJyYXkoc3RhcnRDb2wsIHN0YXJ0Um93ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0UG9zaXRpb24oY29sLCByb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZFtyb3ddW2NvbF1cbiAgICB9XG5cbiAgICBjaGVja1NoaXBFeGlzdHMoY29sLCByb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZFtyb3ddW2NvbF0uaGFzU2hpcFxuICAgIH1cblxuXG4gICAgZ2V0U2hpcChjb2wsIHJvdykge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmlkW3Jvd11bY29sXS5zaGlwXG4gICAgfVxuXG4gICAgY2hlY2tNaXNzZWRIaXQoY29sLCByb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZFtyb3ddW2NvbF0ubWlzc2VkSGl0XG4gICAgfVxuXG4gICAgY2hlY2tXYXNHdWVzc2VkKGNvbCwgcm93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyaWRbcm93XVtjb2xdLndhc0d1ZXNzZWRcbiAgICB9XG5cbiAgICAvLyBjb21wYXJlIHN0cmluZ2lmaWVkIHNoaXAgY29vcmRzIHRvIHRoZSBndWVzc2VkIGNvb3JkcywgYW5kIHJldHVybiB0cnVlIGlmIGFsbCBzaGlwIGNvb3JkcyBhcmUgZ3Vlc3NlZC5cbiAgICBjaGVja0lzR2FtZU92ZXIoKSB7XG4gICAgICAgIGxldCBjb252ZXJ0ZWRBbGxTaGlwQ29vcmRzID0gdGhpcy5hbGxTaGlwQ29vcmRzLm1hcChjb29yZCA9PiBKU09OLnN0cmluZ2lmeShjb29yZCkpXG4gICAgICAgIGxldCBjb252ZXJ0ZWRHdWVzc2VkQ29vcmRzID0gdGhpcy5ndWVzc2VkQ29vcmRzLm1hcChjb29yZCA9PkpTT04uc3RyaW5naWZ5KGNvb3JkKSlcbiAgICAgICAgY29uc29sZS5sb2coY29udmVydGVkQWxsU2hpcENvb3JkcylcbiAgICAgICAgY29uc29sZS5sb2coY29udmVydGVkR3Vlc3NlZENvb3JkcylcbiAgICAgICAgLy8gaWYgKGNvbnZlcnRlZEFsbFNoaXBDb29yZHMuZXZlcnkoc2hpcENvb3JkID0+IGNvbnZlcnRlZEd1ZXNzZWRDb29yZHMuaW5jbHVkZXMoc2hpcENvb3JkKSkpIHtcbiAgICAgICAgLy8gICAgIHRoaXMuaXNHYW1lT3ZlciA9IHRydWU7XG4gICAgICAgIC8vIH1cbiAgICAgICAgY29uc29sZS5sb2coY29udmVydGVkQWxsU2hpcENvb3Jkcy5ldmVyeShzaGlwQ29vcmQgPT4gY29udmVydGVkR3Vlc3NlZENvb3Jkcy5pbmNsdWRlcyhzaGlwQ29vcmQpKSlcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRlZEFsbFNoaXBDb29yZHMuZXZlcnkoc2hpcENvb3JkID0+IGNvbnZlcnRlZEd1ZXNzZWRDb29yZHMuaW5jbHVkZXMoc2hpcENvb3JkKSlcbiAgICB9XG5cbiAgICByZWNlaXZlQXR0YWNrKGNvbCwgcm93KSB7XG4gICAgICAgIC8vIGZpcnN0LCBjaGVjayBpZiBwb3NpdGlvbiBpcyBhbHJlYWR5IGd1ZXNzZWRcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tXYXNHdWVzc2VkKGNvbCwgcm93KSkgcmV0dXJuICdhbHJlYWR5IGF0dGFja2VkJztcbiAgICAgICAgLy8gaWYgbm90IGd1ZXNzZWQsIHRoZW4gbWFyayBhcyBndWVzc2VkXG4gICAgICAgIHRoaXMuZ2V0UG9zaXRpb24oY29sLCByb3cpLndhc0d1ZXNzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmd1ZXNzZWRDb29yZHMucHVzaChbY29sLCByb3ddKVxuXG4gICAgICAgIC8vIGlmIG5vdCwgY2hlY2sgaWYgdGhlcmUgaXMgYSBzaGlwIHRoZXJlXG4gICAgICAgIGlmICh0aGlzLmNoZWNrU2hpcEV4aXN0cyhjb2wsIHJvdykpIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzLCB0aGVuIGlkZW50aWZ5IHRoZSBzaGlwXG4gICAgICAgICAgICAvLyB0aGVuIGhpdCB0aGUgc2hpcFxuICAgICAgICAgICAgdGhpcy5nZXRTaGlwKGNvbCwgcm93KS5oaXQoKVxuICAgICAgICAgICAgLy8gdGhlbiBjaGVjayBpZiBzaGlwIGlzIHN1bmtcbiAgICAgICAgICAgIHRoaXMuZ2V0U2hpcChjb2wsIHJvdykuaXNTdW5rKCk7XG5cbiAgICAgICAgICAgIC8vIHRoZW4gY2hlY2sgaWYgYWxsIHNoaXBzIGFyZSBoaXQsIGJ5IGNvbXBhcmluZyBhbGxTaGlwQ29vcmRzIGFuZCBndWVzc2VkQ29vcmRzIGFycmF5cyBcbiAgICAgICAgICAgIC8vIHRoaXMuY2hlY2tJc0dhbWVPdmVyKCk7XG5cbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGVyZSBpc24ndCBhIHNoaXAsIHRoZW4gbWFyayB0aGUgcGxhY2Ugd2l0aCBtaXNzZWRIaXRcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdldFBvc2l0aW9uKGNvbCwgcm93KS5taXNzZWRIaXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgXG59XG5leHBvcnQge0dhbWVib2FyZH0iLCJleHBvcnQgY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21wdXRlcikge1xuICAgIH1cblxuICAgIGF0dGFjayhnYW1lYm9hcmQsIFtjb2wsIHJvd10pIHtcbiAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCByb3cpXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tcHV0ZXIgZXh0ZW5kcyBQbGF5ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpXG4gICAgfVxuXG4gICAgcmFuZG9tQXR0YWNrKGdhbWVib2FyZCkge1xuICAgICAgICAvLyB0YWtlIHJhbmRvbSBudW1iZXJzIGZvciBjb2x1bW4gYW5kIHJvd1xuICAgICAgICBjb25zdCByYW5kb21Db2wgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgY29uc3QgcmFuZG9tUm93ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG5cbiAgICAgICAgLy90aGVuIGNoZWNrIGlmIGhhcyBiZWVuIGF0dGFja2VkLFxuICAgICAgICBpZihnYW1lYm9hcmQuY2hlY2tXYXNHdWVzc2VkKHJhbmRvbUNvbCwgcmFuZG9tUm93KSkgcmV0dXJuXG5cbiAgICAgICAgLy90aGVuIGNhbGwgYXR0YWNrXG4gICAgICAgIHRoaXMuYXR0YWNrKGdhbWVib2FyZCwgW3JhbmRvbUNvbCwgcmFuZG9tUm93XSlcbiAgICB9XG59IiwiLy8gaW1wb3J0ICdAZm9ydGF3ZXNvbWUvZm9udGF3ZXNvbWUtZnJlZS9qcy9mb250YXdlc29tZSdcbi8vIGltcG9ydCAnQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLWZyZWUvanMvc29saWQnXG4vLyBpbXBvcnQgJ0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlL2pzL3JlZ3VsYXInXG4vLyBpbXBvcnQgJ0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlL2pzL2JyYW5kcydcblxuaW1wb3J0IHsgbWFrZUdhbWVDb250cm9sbGVyIH0gZnJvbSBcIi4vZ2FtZUNvbnRyb2xsZXJcIjtcbmltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgeyBtYWtlRGlzcGxheUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9kaXNwbGF5Q29udHJvbGxlclwiO1xuXG5jb25zb2xlLmxvZygndWggaGVsbG8/Jylcbm1ha2VEaXNwbGF5Q29udHJvbGxlcigpOyIsImltcG9ydCB7IG1ha2VHYW1lQ29udHJvbGxlciB9IGZyb20gXCIuL2dhbWVDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuZnVuY3Rpb24gbWFrZURpc3BsYXlDb250cm9sbGVyKCkge1xuXG4gICAgbGV0IGdhbWVDb250cm9sbGVyID0gbWFrZUdhbWVDb250cm9sbGVyKCk7XG5cbiAgICBsZXQgY3VycmVudFNoaXAgPSBudWxsO1xuICAgIGxldCBtb3ZpbmdTaGlwID0gZmFsc2U7XG4gICAgbGV0IGN1cnJlbnRseVJvdGF0aW5nID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiBzZXRUb0N1cnJlbnRseVJvdGF0aW5nKCkge2N1cnJlbnRseVJvdGF0aW5nID0gdHJ1ZX1cbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50bHlSb3RhdGluZygpIHtyZXR1cm4gY3VycmVudGx5Um90YXRpbmd9XG4gICAgZnVuY3Rpb24gZGlzYWJsZUN1cnJlbnRseVJvdGF0aW5nKCkge2N1cnJlbnRseVJvdGF0aW5nID0gZmFsc2V9XG4gICAgZnVuY3Rpb24gc2V0TW92aW5nU2hpcFRvVHJ1ZSgpIHttb3ZpbmdTaGlwID0gdHJ1ZX1cbiAgICBmdW5jdGlvbiBzZXRNb3ZpbmdTaGlwVG9GYWxzZSgpIHttb3ZpbmdTaGlwID0gZmFsc2V9XG4gICAgZnVuY3Rpb24gY2hlY2tJZk1vdmluZ1NoaXAoKSB7cmV0dXJuIG1vdmluZ1NoaXB9XG5cbiAgICBmdW5jdGlvbiBmaW5kU2hpcEZyb21DbGFzc0xpc3RBbmRQZXJmb3JtQWN0aW9uKGxpc3QsIGFjdGlvbikge1xuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgbGlzdC5jb250YWlucygnY2FycmllcicpOlxuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb24oJ2NhcnJpZXInKTsgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgbGlzdC5jb250YWlucygnYmF0dGxlc2hpcCcpOlxuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb24oJ2JhdHRsZXNoaXAnKTsgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgbGlzdC5jb250YWlucygnY3J1aXNlcicpOlxuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb24oJ2NydWlzZXInKTsgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgbGlzdC5jb250YWlucygnc3VibWFyaW5lJyk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbignc3VibWFyaW5lJyk7IGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIGxpc3QuY29udGFpbnMoJ2Rlc3Ryb3llcicpOlxuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb24oJ2Rlc3Ryb3llcicpOyBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBzaGlwTGlzdCA9IHtcbiAgICAgICAgJ2NhcnJpZXInOiB7XG4gICAgICAgICAgICBsZW5ndGg6IDUsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgICAgICAgaXNQbGFjZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAnYmF0dGxlc2hpcCc6IHtcbiAgICAgICAgICAgIGxlbmd0aDogNCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICBpc1BsYWNlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICdjcnVpc2VyJzoge1xuICAgICAgICAgICAgbGVuZ3RoOiAzLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdob3Jpem9udGFsJyxcbiAgICAgICAgICAgIGlzUGxhY2VkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJ3N1Ym1hcmluZSc6IHtcbiAgICAgICAgICAgIGxlbmd0aDogMyxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICBpc1BsYWNlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICdkZXN0cm95ZXInOiB7XG4gICAgICAgICAgICBsZW5ndGg6IDIsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgICAgICAgaXNQbGFjZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRTaGlwT3JpZW50YXRpb24oKSB7XG4gICAgICAgIHJldHVybiBzaGlwTGlzdFtjdXJyZW50U2hpcF0ub3JpZW50YXRpb25cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVDdXJyZW50U2hpcE9yaWVudGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gc2hpcExpc3RbY3VycmVudFNoaXBdLm9yaWVudGF0aW9uID0gc2hpcExpc3RbY3VycmVudFNoaXBdLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY2xhcmVDdXJyZW50U2hpcFBsYWNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHNoaXBMaXN0W2N1cnJlbnRTaGlwXS5pc1BsYWNlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVudFNoaXAoKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50U2hpcDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRDdXJyZW50U2hpcChzaGlwKSB7XG4gICAgICAgIGN1cnJlbnRTaGlwID0gc2hpcFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEN1cnJlbnRTaGlwRnJvbURPTShlbGVtZW50KSB7XG4gICAgICAgIGxldCBsaXN0ID0gZWxlbWVudC5jbGFzc0xpc3RcbiAgICAgICAgZmluZFNoaXBGcm9tQ2xhc3NMaXN0QW5kUGVyZm9ybUFjdGlvbihsaXN0LCBzZXRDdXJyZW50U2hpcClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldEN1cnJlbnRTaGlwKCkge1xuICAgICAgICBjdXJyZW50U2hpcCA9IG51bGxcbiAgICB9XG5cbiAgICAvL25lZWQgdG8gY2hhbmdlIHRoaXNcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50U2hpcExlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHNoaXBMaXN0W2N1cnJlbnRTaGlwXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgbGV0IGJvZHlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXG5cbiAgICBmdW5jdGlvbiBwb3B1bGF0ZUVsZW1lbnRJbmZvKGRpdlR5cGUsICB0ZXh0PW51bGwsIHBhcmVudD1udWxsLCAuLi5jbGFzc2VzKSB7XG4gICAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGRpdlR5cGUpO1xuICAgICAgICBjbGFzc2VzLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gbmV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkpO1xuICAgICAgICBpZiAodGV4dCkgbmV3RWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgIGlmIChwYXJlbnQpIHBhcmVudC5hcHBlbmRDaGlsZChuZXdFbGVtZW50KVxuICAgICAgICByZXR1cm4gbmV3RWxlbWVudDtcbiAgICB9XG5cblxuICAgIC8vIHByZWdhbWUgZGlzcGxheSBjb2RlXG4gICAgZnVuY3Rpb24gY3JlYXRlUHJlR2FtZUdyaWQoKSB7XG4gICAgICAgIGxldCBpbml0aWFsR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5pdGlhbC1ncmlkXCIpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJvd0VsZW1lbnQgPSBwb3B1bGF0ZUVsZW1lbnRJbmZvKCdkaXYnLCBudWxsLCBpbml0aWFsR3JpZCwgJ3JvdycpXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgc3BhY2VFbGVtZW50ID0gcG9wdWxhdGVFbGVtZW50SW5mbygnZGl2JywgJycsIHJvd0VsZW1lbnQsICdjb2x1bW4nLCAncHJlZ2FtZS1zcGFjZScpXG4gICAgICAgICAgICAgICAgc3BhY2VFbGVtZW50LmRhdGFzZXQucm93ID0gaTtcbiAgICAgICAgICAgICAgICBzcGFjZUVsZW1lbnQuZGF0YXNldC5jb2wgPSBqO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlSG92ZXJlZENsYXNzKGhvdmVyZWRFbGVtZW50U2VsZWN0b3IpIHtcbiAgICAgICAgbGV0IGhvdmVyaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7aG92ZXJlZEVsZW1lbnRTZWxlY3Rvcn1gKVxuICAgICAgICBpZiAoaG92ZXJpbmcpIHtcbiAgICAgICAgICAgIGhvdmVyaW5nLmZvckVhY2goc3BhY2UgPT4ge1xuICAgICAgICAgICAgICAgIHNwYWNlLmNsYXNzTGlzdC5yZW1vdmUoaG92ZXJlZEVsZW1lbnRTZWxlY3RvcilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxIb3ZlcmVkKCkge1xuICAgICAgICByZW1vdmVIb3ZlcmVkQ2xhc3MoJ3ZhbGlkLWhvdmVyaW5nJyk7XG4gICAgICAgIHJlbW92ZUhvdmVyZWRDbGFzcygnaW52YWxpZC1ob3ZlcmluZycpO1xuICAgICAgICByZW1vdmVIb3ZlcmVkQ2xhc3MoJ3NoaXAtaGVhZC1ob3ZlcicpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkU2hpcEhlYWRTdHlsZUZvckFsbFNoaXBzKGNsaWNrVGFyZ2V0KSB7XG4gICAgICAgIGxldCBsaXN0ID0gY2xpY2tUYXJnZXQuY2xhc3NMaXN0XG4gICAgICAgIGZ1bmN0aW9uIGFkZFNoaXBIZWFkU3R5bGUoc2hpcENsYXNzKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwSGVhZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3NoaXBDbGFzc30uc2hpcC1oZWFkYCk7XG4gICAgICAgICAgICBzaGlwSGVhZC5jbGFzc0xpc3QuYWRkKCdzaGlwLWhlYWQtaG92ZXInKVxuICAgICAgICB9XG4gICAgICAgIGZpbmRTaGlwRnJvbUNsYXNzTGlzdEFuZFBlcmZvcm1BY3Rpb24obGlzdCwgYWRkU2hpcEhlYWRTdHlsZSlcbiAgICB9XG4gICAgXG4gICAgLy8gaG92ZXJpbmcgdG8gc2hvdyB0aGUgZXh0ZW5kZWQgaG92ZXIgXG4gICAgYm9keUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJlZ2FtZS1zcGFjZScpKSB7XG4gICAgICAgICAgICByZW1vdmVBbGxIb3ZlcmVkKCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudFNoaXApIGV4dGVuZE1haW5Ib3ZlcihlLnRhcmdldClcbiAgICAgICAgICAgIGFkZFNoaXBIZWFkU3R5bGVGb3JBbGxTaGlwcyhlLnRhcmdldClcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBob3ZlcmluZyBvdmVyIHRoZSBzaGlwIGhlYWQgdG8gc2hvdyByb3RhdGVkIGhvdmVyXG4gICAgYm9keUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2hpcC1oZWFkJykpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50bHlSb3RhdGluZykge1xuICAgICAgICAgICAgICAgIHNob3dSb3RhdGVkSG92ZXIoZS50YXJnZXQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gd2hlbiB0aGUgbW91c2UgbGVhdmVzIHRoZSBncmlkLCBoaWRlIHRoZSBob3ZlcmVkIHNwYWNlc1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWFsLWdyaWQnKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICByZW1vdmVBbGxIb3ZlcmVkKCk7XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIHJlbW92ZUNsYXNzRnJvbVByZXZpb3VzbHlTZWxlY3RlZCgpIHtcbiAgICAgICAgbGV0IHByZXZpb3VzU2VsZWN0ZWRTaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXNoaXAtb2ZmLWdyaWQnKVxuICAgICAgICBpZiAocHJldmlvdXNTZWxlY3RlZFNoaXApIHByZXZpb3VzU2VsZWN0ZWRTaGlwLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkLXNoaXAtb2ZmLWdyaWQnKVxuICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtYXJrVmFsaWRIb3Zlcihjb2wsIHJvdykge1xuICAgICAgICAgICAgbGV0IHNwYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY29sPVwiJHtjb2x9XCJdW2RhdGEtcm93PVwiJHtyb3d9XCJdYClcbiAgICAgICAgICAgIHNwYWNlLmNsYXNzTGlzdC5hZGQoJ3ZhbGlkLWhvdmVyaW5nJylcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1hcmtJbnZhbGlkSG92ZXIoY29sLCByb3cpIHtcbiAgICAgICAgICAgIGxldCBzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbD1cIiR7Y29sfVwiXVtkYXRhLXJvdz1cIiR7cm93fVwiXWApXG4gICAgICAgICAgICBzcGFjZS5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkLWhvdmVyaW5nJylcbiAgICAgICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0ZW5kTWFpbkhvdmVyKGNsaWNrVGFyZ2V0KSB7XG5cbiAgICAgICAgZnVuY3Rpb24gZGV0ZXJtaW5lT3RoZXJIb3ZlckVsZW1lbnRzKGNsaWNrVGFyZ2V0KSB7XG4gICAgICAgICAgICBsZXQgaW52YWxpZFBsYWNlbWVudCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaGVhZFJvdyA9IHBhcnNlSW50KGNsaWNrVGFyZ2V0LmRhdGFzZXQucm93KVxuICAgICAgICAgICAgY29uc3QgaGVhZENvbCA9IHBhcnNlSW50KGNsaWNrVGFyZ2V0LmRhdGFzZXQuY29sKVxuICAgICAgICAgICAgbGV0IHNoaXBMZW5ndGggPSBnZXRDdXJyZW50U2hpcExlbmd0aCgpO1xuXG4gICAgICAgICAgICAvLyB0aGlzIGlzIGhvcml6b250YWxcbiAgICAgICAgICAgIC8vIGdldCB0aGUgbmV4dCBmZXcsIHVzaW5nIGFycmF5IGxvZ2ljXG4gICAgICAgICAgICBpZiAoZ2V0Q3VycmVudFNoaXBPcmllbnRhdGlvbigpID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaGVhZENvbDsgaSA8IGhlYWRDb2wgKyBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiA5IHx8IGNoZWNrSWZBbHJlYWR5UGxhY2VkKGksIGhlYWRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkUGxhY2VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFpbnZhbGlkUGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBoZWFkQ29sOyBpIDwgaGVhZENvbCArIHNoaXBMZW5ndGg7IGkrKykgbWFya1ZhbGlkSG92ZXIoaSwgaGVhZFJvdylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW52YWxpZFBsYWNlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaGVhZENvbDsgaSA8IGhlYWRDb2wgKyBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gOSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrSW52YWxpZEhvdmVyKGksIGhlYWRSb3cpfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vdGhpcywgVEhJUyBpcyB2ZXJ0aWNhbFxuICAgICAgICAgICAgZWxzZSBpZiAoZ2V0Q3VycmVudFNoaXBPcmllbnRhdGlvbigpID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRSb3c7IGkgPCBoZWFkUm93ICsgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID4gOSB8fCBjaGVja0lmQWxyZWFkeVBsYWNlZChoZWFkQ29sLCBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFBsYWNlbWVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghaW52YWxpZFBsYWNlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaGVhZFJvdzsgaSA8IGhlYWRSb3cgKyBzaGlwTGVuZ3RoOyBpKyspIG1hcmtWYWxpZEhvdmVyKGhlYWRDb2wsIGkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGludmFsaWRQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRSb3c7IGkgPCBoZWFkUm93ICsgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDkpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya0ludmFsaWRIb3ZlcihoZWFkQ29sLCBpKX1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkZXRlcm1pbmVPdGhlckhvdmVyRWxlbWVudHMoY2xpY2tUYXJnZXQpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1JvdGF0ZWRIb3ZlcihjbGlja1RhcmdldCkge1xuICAgICAgICBjb25zdCBsZW5ndGggPSBnZXRDdXJyZW50U2hpcExlbmd0aCgpXG4gICAgICAgIGxldCBpbnZhbGlkUGxhY2VtZW50ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGhlYWRDb2wgPSBwYXJzZUludChjbGlja1RhcmdldC5kYXRhc2V0LmNvbCk7XG4gICAgICAgIGNvbnN0IGhlYWRSb3cgPSBwYXJzZUludChjbGlja1RhcmdldC5kYXRhc2V0LnJvdyk7XG4gICAgICAgIC8vIGtpbmRhIHNpbWlhbHIgdG8gZGV0ZXJtaW5lT3RoZXIgSG92ZXJFbGVlbW50cywgZXhjZXB0IGluY3JlYXNlIHJvdyByYXRoZXIgdGhhbiBjb2x1bW5cblxuICAgICAgICBpZiAoZ2V0Q3VycmVudFNoaXBPcmllbnRhdGlvbigpID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBoZWFkUm93ICsgMTsgaSA8IGhlYWRSb3cgKyBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpID4gOSB8fCBjaGVja0lmQWxyZWFkeVBsYWNlZChoZWFkQ29sLCBpKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkUGxhY2VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnZhbGlkUGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRSb3c7IGkgPCBoZWFkUm93ICsgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiA5KSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgbWFya0ludmFsaWRIb3ZlcihoZWFkQ29sLCBpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaW52YWxpZFBsYWNlbWVudCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBoZWFkUm93OyBpIDwgaGVhZFJvdyArIGxlbmd0aDsgaSsrKSB7bWFya1ZhbGlkSG92ZXIoaGVhZENvbCwgaSl9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIGVsc2UgaWYgKGdldEN1cnJlbnRTaGlwT3JpZW50YXRpb24oKSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRDb2wgKyAxOyBpIDwgaGVhZENvbCArIGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiA5IHx8IGNoZWNrSWZBbHJlYWR5UGxhY2VkKGksIGhlYWRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRQbGFjZW1lbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGludmFsaWRQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaGVhZENvbDsgaSA8IGhlYWRDb2wgKyBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDkpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBtYXJrSW52YWxpZEhvdmVyKGksIGhlYWRSb3cpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpbnZhbGlkUGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRDb2w7IGkgPCBoZWFkQ29sICsgbGVuZ3RoOyBpKyspIHttYXJrVmFsaWRIb3ZlcihpLCBoZWFkUm93KX1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyZXlPdXRTZWxlY3RlZFNoaXAoKSB7XG4gICAgICAgIC8vIGRvbnQgbmVlZCB0byBjaGFuZ2UgdGhpc1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtc2hpcC1vZmYtZ3JpZCcpLmNsYXNzTGlzdC5hZGQoJ2dyZXktb3V0JylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRTaGlwQ2xhc3NUb1NwYWNlKGNvbCwgcm93KSB7XG4gICAgICAgIGxldCBzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbD1cIiR7Y29sfVwiXVtkYXRhLXJvdz1cIiR7cm93fVwiXWApXG4gICAgICAgIHNwYWNlLmNsYXNzTGlzdC5hZGQoJ3NoaXAtaW4tc3BhY2UnKVxuICAgICAgICBzcGFjZS5jbGFzc0xpc3QuYWRkKGdldEN1cnJlbnRTaGlwKCkpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkU2hpcEhlYWQoY2xpY2tUYXJnZXQpIHtcbiAgICAgICAgY2xpY2tUYXJnZXQuY2xhc3NMaXN0LmFkZCgnc2hpcC1oZWFkJylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVTaGlwSGVhZCgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFNoaXBIZWFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNoaXAtaGVhZC4ke2dldEN1cnJlbnRTaGlwKCl9YCk7XG4gICAgICAgIGlmIChjdXJyZW50U2hpcEhlYWQpIGN1cnJlbnRTaGlwSGVhZC5jbGFzc0xpc3QucmVtb3ZlKCdzaGlwLWhlYWQnKVxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc2hpcC1oZWFkLiR7Z2V0Q3VycmVudFNoaXAoKX1gKS5jbGFzc0xpc3QucmVtb3ZlKCdzaGlwLWhlYWQnKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrSWZDbGlja1NoaXBIZWFkKGNsaWNrVGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBjbGlja1RhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NoaXAtaGVhZCcpXG4gICAgfVxuXG4gICAgLy8gY2xpY2tpbmcgb24gc3BhY2VzIG9uIGdyaWRcblxuICAgIC8vIGkgbmVlZCB0byBub3QgYWRkIHN0dWZmIHdoZW4gdGhlcmUncyBhIGVsZW1lbnQgdG9vIGNsb3NlLi4uIGRvIGkgbmVlZCB0byB1c2Ugcm93IGFuZCBjb2x1bW4/XG4gICAgLy9tYXliZVxuICAgIC8vIGNoZWNrIGlmIGNhbiBwbGFjZS4uXG5cbiAgICBmdW5jdGlvbiBkZWNvcmF0ZVNlbGVjdGVkU2hpcChjbGlja1RhcmdldCkge1xuICAgICAgICBmdW5jdGlvbiBkZWNvcmF0ZShzaGlwTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWFsLWdyaWQnKVxuICAgICAgICAgICAgZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtzaGlwTmFtZX1gKS5mb3JFYWNoKHNwYWNlID0+IHtcbiAgICAgICAgICAgICAgICBzcGFjZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZC1zaGlwLW9uLWdyaWQnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBmaW5kU2hpcEZyb21DbGFzc0xpc3RBbmRQZXJmb3JtQWN0aW9uKGNsaWNrVGFyZ2V0LmNsYXNzTGlzdCwgZGVjb3JhdGUpXG4gICAgfVxuXG4gICAgLy8gd2lsbCBuZWVkIGEgcmVtb3ZlRGVjb3JhdGlvbiBmdW5jdGlvbiBcbiAgICBmdW5jdGlvbiByZW1vdmVTZWxlY3RlZFNoaXBEZWNvcmF0aW9uKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuc2VsZWN0ZWQtc2hpcC1vbi1ncmlkYCkuZm9yRWFjaChzcGFjZSA9PiB7XG4gICAgICAgICAgICBzcGFjZS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZC1zaGlwLW9uLWdyaWQnKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZVJvdGF0ZUljb24oKSB7XG4gICAgICAgIGxldCBpY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaScpXG4gICAgICAgIGljb24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpY29uKVxuICAgIH1cblxuICAgIC8vIGNsaWNrIG9uIHNoaXAgaGVhZCB0byBtb3ZlIG9yIHJvdGF0ZVxuICAgIGJvZHlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2hpcC1oZWFkJykpIHtcblxuICAgICAgICAgICAgLy8gdGhpcyBzZXRzIGN1cnJlbnRTaGlwLCB3aGVuIGNsaWNraW5nIG9uIHRoZSBzaGlwIGhlYWRcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldENvcnJlc3BvbmRpbmdTaGlwRnJvbUdyaWQoY2xpY2tUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50U2hpcEZyb21ET00oY2xpY2tUYXJnZXQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dSb3RhdGVJY29uKGNsaWNrVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGNsaWNrVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2knKSkgY2xpY2tUYXJnZXQucmVtb3ZlQ2hpbGQoY2xpY2tUYXJnZXQucXVlcnlTZWxlY3RvcignaScpKVxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JvdGF0ZS10ZW1wbGF0ZScpXG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmUgPXRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICAgICAgICAgICAgY2xpY2tUYXJnZXQuYXBwZW5kQ2hpbGQoY2xvbmUuY2hpbGRyZW5bMF0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHRoaXMgaXMgdG8gc2V0IHRvIHJvdGF0ZS9tb3ZlIG1vZGVcbiAgICAgICAgICAgIGlmICghY3VycmVudGx5Um90YXRpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2hpcCBoZWFkIENMSUNLRUQgYW5kIGluIE5PVyBpbiByb3RhdGUgbW9kZScpXG4gICAgICAgICAgICAgICAgc2V0VG9DdXJyZW50bHlSb3RhdGluZygpO1xuICAgICAgICAgICAgICAgIHNldE1vdmluZ1NoaXBUb1RydWUoKVxuICAgICAgICAgICAgICAgIHNldENvcnJlc3BvbmRpbmdTaGlwRnJvbUdyaWQoZS50YXJnZXQpXG4gICAgICAgICAgICAgICAgZGVjb3JhdGVTZWxlY3RlZFNoaXAoZS50YXJnZXQpXG4gICAgICAgICAgICAgICAgc2hvd1JvdGF0ZUljb24oZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIC8vIG1heSBuZWVkIHRvIHVzZSBleHRlbmRIb3Zlci4gXG4gICAgICAgICAgICAgICAgLy8gZG9udCB0aGluayBpdCdzIG5lZWRlZCBoZXJlLi4uIFxuICAgICAgICAgICAgICAgIGV4dGVuZE1haW5Ib3ZlcihlLnRhcmdldClcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHRvIHJvdGF0ZSB0aGUgc2hpcFxuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudGx5Um90YXRpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBpbnZhbGlkIG9yIG91dCBvZiBib3VuZHMgZm9yIHJvdGF0ZWQgcGxhY2VtZW50XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrSW52YWxpZFBsYWNlbWVudChlLnRhcmdldCkpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8vIGFuZCB1c2UgcGxhY2VTaGlwIHdoaWNoIGp1c3QgY29udmVydHMgaG92ZXIgaW50byBzaGlwIHBpZWNlc1xuICAgICAgICAgICAgICAgIHJlbW92ZUN1cnJlbnRTaGlwRnJvbUdyaWQoKTtcbiAgICAgICAgICAgICAgICByZW1vdmVTZWxlY3RlZFNoaXBEZWNvcmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlUm90YXRlSWNvbigpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnZlcnRWYWxpZEhvdmVySW50b1NoaXAoKTtcbiAgICAgICAgICAgICAgICBwbGFjZVNoaXAoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgd2hlcmUgaSBuZWVkIHRvIHJlbW92ZSBjdXJyZW50IHNoaXAgXG5cbiAgICAgICAgICAgICAgICAvLyB1c2UgdG9nZ2xlQ3VycmVudFNoaXBSb3RhdGlvblxuICAgICAgICAgICAgICAgIC8vIGFuZCBtYXliZSByZXNldEN1cnJlbnRTaGlwXG4gICAgICAgICAgICAgICAgcmVtb3ZlQWxsSG92ZXJlZCgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdldEN1cnJlbnRTaGlwT3JpZW50YXRpb24oKSlcbiAgICAgICAgICAgICAgICB0b2dnbGVDdXJyZW50U2hpcE9yaWVudGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ2V0Q3VycmVudFNoaXBPcmllbnRhdGlvbigpKVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNoaXAoKTtcbiAgICAgICAgICAgICAgICBkaXNhYmxlQ3VycmVudGx5Um90YXRpbmcoKTtcbiAgICAgICAgICAgICAgICBzZXRNb3ZpbmdTaGlwVG9GYWxzZSgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaGlwIGhlYWQgQ0xJQ0tFRCBhbmQgZGlzYWJsZSByb3RhdGUgbW9kZSBhbmQgcmVzZXQgY3VycmVudCBzaGlwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBwbGFjZVNoaXAoY2xpY2tUYXJnZXQpIHtcbiAgICAgICAgbGV0IGludmFsaWRQbGFjZW1lbnQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgaGVhZFJvdyA9IHBhcnNlSW50KGNsaWNrVGFyZ2V0LmRhdGFzZXQucm93KVxuICAgICAgICBjb25zdCBoZWFkQ29sID0gcGFyc2VJbnQoY2xpY2tUYXJnZXQuZGF0YXNldC5jb2wpXG4gICAgICAgIGxldCBzaGlwTGVuZ3RoID0gZ2V0Q3VycmVudFNoaXBMZW5ndGgoKTtcblxuICAgICAgICBpZiAoZ2V0Q3VycmVudFNoaXBPcmllbnRhdGlvbigpID09PSAnaG9yaXpvbnRhbCdcbiAgICAgICAgICYmICFjdXJyZW50bHlSb3RhdGluZ1xuICAgICAgICAgICAgICAgIHx8IGdldEN1cnJlbnRTaGlwT3JpZW50YXRpb24oKSA9PT0gJ3ZlcnRpY2FsJyAmJiBjdXJyZW50bHlSb3RhdGluZ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBoZWFkQ29sOyBpIDwgaGVhZENvbCArIHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpID4gOSB8fCBjaGVja0lmQWxyZWFkeVBsYWNlZChpLCBoZWFkUm93KSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkUGxhY2VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWludmFsaWRQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaGVhZENvbDsgaSA8IGhlYWRDb2wgKyBzaGlwTGVuZ3RoOyBpKyspIGFkZFNoaXBDbGFzc1RvU3BhY2UoaSwgaGVhZFJvdylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgZWxzZSBpZiAoZ2V0Q3VycmVudFNoaXBPcmllbnRhdGlvbigpID09PSAndmVydGljYWwnXG4gICAgICAgICYmICFjdXJyZW50bHlSb3RhdGluZ1xuICAgICAgICAgICAgICAgIHx8IChnZXRDdXJyZW50U2hpcE9yaWVudGF0aW9uKCkgPT0gJ2hvcml6b250YWwnICYmIGdldEN1cnJlbnRseVJvdGF0aW5nKCkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRSb3c7IGkgPCBoZWFkUm93ICsgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiA5IHx8IGNoZWNrSWZBbHJlYWR5UGxhY2VkKGhlYWRDb2wsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRQbGFjZW1lbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWludmFsaWRQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaGVhZFJvdzsgaSA8IGhlYWRSb3cgKyBzaGlwTGVuZ3RoOyBpKyspIGFkZFNoaXBDbGFzc1RvU3BhY2UoaGVhZENvbCwgaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9XG5cbiAgICAvLyBjbGljayBvbiB0aGUgZ3JpZCB0byBwbGFjZSBhIHNoaXBcbiAgICBib2R5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIC8vIGRvbid0IGFsbG93IGNsaWNrIGlmIHNoaXAgaXMgbm90IHNlbGVjdGVkXG4gICAgICAgIGlmICghY3VycmVudFNoaXApIHJldHVyblxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmVnYW1lLXNwYWNlJykpIHtcblxuICAgICAgICAgICAgaWYgKGNoZWNrSW52YWxpZFBsYWNlbWVudChlLnRhcmdldCkpIHJldHVyblxuICAgICAgICAgICAgLy9tb3ZlIGV4aXN0aW5nIHNoaXBcbiAgICAgICAgICAgIGlmIChjaGVja0lmTW92aW5nU2hpcCgpKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2hpcCBpcyBNT1ZJTkcnKVxuICAgICAgICAgICAgICAgIC8vc2hpcCBoZWFkIGlzIG5vdCBjbGlja2VkXG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja0lmQ2xpY2tTaGlwSGVhZChlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaGlwIGhlYWQgTk9UIGNsaWNrZWQsIHNoaXAgaXMgbW92aW5nJylcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2hpcEhlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUm90YXRlSWNvbigpXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVNlbGVjdGVkU2hpcERlY29yYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ3VycmVudFNoaXBGcm9tR3JpZCgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRNb3ZpbmdTaGlwVG9GYWxzZSgpO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlQ3VycmVudGx5Um90YXRpbmcoKTtcblxuICAgICAgICAgICAgICAgICAgICBwbGFjZVNoaXAoZS50YXJnZXQpXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUFsbEhvdmVyZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2hpcEhlYWQoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBkZWNsYXJlQ3VycmVudFNoaXBQbGFjZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U2hpcCgpO1xuICAgICAgICAgICAgICAgICAgICBjaGVja0lmQ2FuU3RhcnRHYW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gc2hpcCBoZWFkIGlzIGNsaWNrZWQuLi4gdGhpcyBzaG91bGQgbm90IGRvIGFueXRoaW5nIGJ0d1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrSWZDbGlja1NoaXBIZWFkKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2hpcCBoZWFkIHdhcyBjbGlja2VkJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vcGxhY2Ugc2hpcCBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaGlwIE5PVCBtb3ZpbmcsIHBsYWNpbmcgZm9yIHRoZSBmaXJzdCB0aW1lJylcbiAgICAgICAgICAgICAgICBncmV5T3V0U2VsZWN0ZWRTaGlwKCk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3NGcm9tUHJldmlvdXNseVNlbGVjdGVkKCk7XG5cbiAgICAgICAgICAgICAgICBwbGFjZVNoaXAoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUFsbEhvdmVyZWQoKTtcbiAgICAgICAgICAgICAgICBhZGRTaGlwSGVhZChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgZGVjbGFyZUN1cnJlbnRTaGlwUGxhY2VkKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U2hpcCgpO1xuICAgICAgICAgICAgICAgIGNoZWNrSWZDYW5TdGFydEdhbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLy8gZm9yIGxlbmd0aCBvZiBzaGlwLCBhbG9uZyBob3Jpb256dGFsIG9yIHZlcnRpY2FsLCBjaGVjayBlYWNoIHNwYWNlIGlmIG91dCBvZiBib3VuZHMgb3IgaWYgc2hpcC1pbi1zcGFjZVxuICAgIGZ1bmN0aW9uIGNoZWNrSWZBbHJlYWR5UGxhY2VkKGNvbCwgcm93KSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb2w9XCIke2NvbH1cIl1bZGF0YS1yb3c9XCIke3Jvd31cIl1gKS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoaXAtaW4tc3BhY2UnKVxuICAgIH1cblxuICAgIC8vY2hlY2sgaWYgY2FuIHBsYWNlIHRoZSBzaGlwXG4gICAgZnVuY3Rpb24gY2hlY2tJbnZhbGlkUGxhY2VtZW50KGNsaWNrVGFyZ2V0KSB7XG4gICAgICAgIGxldCBjYW5ub3RQbGFjZVNoaXAgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBsZW5ndGggPSBnZXRDdXJyZW50U2hpcExlbmd0aCgpO1xuICAgICAgICBjb25zdCBoZWFkUm93ID0gcGFyc2VJbnQoY2xpY2tUYXJnZXQuZGF0YXNldC5yb3cpXG4gICAgICAgIGNvbnN0IGhlYWRDb2wgPSBwYXJzZUludChjbGlja1RhcmdldC5kYXRhc2V0LmNvbClcblxuICAgICAgICBjb25zb2xlLmxvZyhnZXRDdXJyZW50U2hpcE9yaWVudGF0aW9uKCkpXG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRseVJvdGF0aW5nKVxuXG4gICAgICAgIC8vIHJlcXVpcmVzIGNoZWNraW5nIGlmIGN1cnJlbnRseSByb3RhdGluZzsgaWYgc28sIGNoZWNrIHRoZSBvcHBvc2l0ZSBvcmllbnRhdGlvblxuICAgICAgICBpZiAoZ2V0Q3VycmVudFNoaXBPcmllbnRhdGlvbigpID09PSAnaG9yaXpvbnRhbCcmJiAhY3VycmVudGx5Um90YXRpbmdcbiAgICAgICAgICAgICAgICB8fCBnZXRDdXJyZW50U2hpcE9yaWVudGF0aW9uKCkgPT09ICd2ZXJ0aWNhbCcgJiYgY2hlY2tJZkNsaWNrU2hpcEhlYWQoY2xpY2tUYXJnZXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBtZWFucyByb3cgaXMgdGhlIHNhbWUsIGFuZCBjb2x1bW5zIGNoYW5nZVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRDb2wgKyAxOyBpIDwgaGVhZENvbCArIGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiA5IHx8IGNoZWNrSWZBbHJlYWR5UGxhY2VkKGksIGhlYWRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbm5vdFBsYWNlU2hpcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYgKChnZXRDdXJyZW50U2hpcE9yaWVudGF0aW9uKCkgPT09ICd2ZXJ0aWNhbCcgJiYgIWN1cnJlbnRseVJvdGF0aW5nKVxuICAgICAgICAgICAgICAgIHx8IGdldEN1cnJlbnRTaGlwT3JpZW50YXRpb24oKSA9PSAnaG9yaXpvbnRhbCcgJiYgY2hlY2tJZkNsaWNrU2hpcEhlYWQoY2xpY2tUYXJnZXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBtZWFucyBjb2x1bW4gaXMgdGhlIHNhbWUsIGFuZCByb3dzIGNoYW5nZVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRSb3cgKyAxOyBpIDwgaGVhZFJvdyArIGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiA5IHx8IGNoZWNrSWZBbHJlYWR5UGxhY2VkKGhlYWRDb2wsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbm5vdFBsYWNlU2hpcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2Fubm90UGxhY2VTaGlwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZVNoaXBGcm9tR3JpZChzaGlwTmFtZSkge1xuICAgICAgICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluaXRpYWwtZ3JpZCcpXG4gICAgICAgIGdyaWQucXVlcnlTZWxlY3RvckFsbChgLiR7c2hpcE5hbWV9YCkuZm9yRWFjaChzcGFjZSA9PiB7XG4gICAgICAgICAgICBzcGFjZS5jbGFzc0xpc3QucmVtb3ZlKHNoaXBOYW1lKVxuICAgICAgICAgICAgc3BhY2UuY2xhc3NMaXN0LnJlbW92ZSgnc2hpcC1pbi1zcGFjZScpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ3VycmVudFNoaXBGcm9tR3JpZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coYHJlbW92ZSBjdXJyZW50IHNoaXAgZnJvbSBncmlkOiAke2dldEN1cnJlbnRTaGlwKCl9YClcbiAgICAgICAgcmVtb3ZlU2hpcEZyb21HcmlkKGdldEN1cnJlbnRTaGlwKCkpXG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIHRoZSBjb3JyZXNwb25kaW5nIHNoaXAgZnJvbSB0aGUgYm9hcmQsIHdoZW4gY2xpY2tpbmcgb24gaXQuXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ29ycmVzcG9uZGluZ1NoaXBGcm9tR3JpZEZvckFsbFNoaXBzKHNoaXBUb1JlcGxhY2UpIHtcbiAgICAgICAgbGV0IGNsYXNzTGlzdCA9IHNoaXBUb1JlcGxhY2UuY2xhc3NMaXN0O1xuICAgICAgICBmaW5kU2hpcEZyb21DbGFzc0xpc3RBbmRQZXJmb3JtQWN0aW9uKGNsYXNzTGlzdCwgcmVtb3ZlU2hpcEZyb21HcmlkKTtcbiAgICB9XG5cbiAgICAvLyBjbGljayBvbiBzaGlwIHdoaWNoIGlzIG9mZiB0aGUgYm9hcmQsIGZvciBwbGFjaW5nIG9uIGJvYXJkXG4gICAgYm9keUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBsZXQgbGlzdCA9IGUudGFyZ2V0LmNsYXNzTGlzdFxuICAgICAgICBpZiAobGlzdC5jb250YWlucygnc2hpcCcpKSB7XG4gICAgICAgICAgICBpZiAobGlzdC5jb250YWlucygnZ3JleS1vdXQnKSkgcmVtb3ZlQ29ycmVzcG9uZGluZ1NoaXBGcm9tR3JpZEZvckFsbFNoaXBzKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzRnJvbVByZXZpb3VzbHlTZWxlY3RlZCgpO1xuICAgICAgICAgICAgcmVtb3ZlU2hpcEhlYWQoKVxuICAgICAgICAgICAgcmVtb3ZlQWxsSG92ZXJlZCgpO1xuICAgICAgICAgICAgKGxpc3QuYWRkKCdzZWxlY3RlZC1zaGlwLW9mZi1ncmlkJykpXG4gICAgICAgICAgICBzZXRDdXJyZW50U2hpcEZyb21ET00oZS50YXJnZXQpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gY2hlY2tJZkNhblN0YXJ0R2FtZSgpIHtcbiAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBzaGlwcyBhcmUgcGxhY2VkXG4gICAgICAgIGxldCBjYW5TdGFydCA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IHNoaXAgaW4gc2hpcExpc3QpIHtcbiAgICAgICAgICAgIGlmIChzaGlwTGlzdFtzaGlwXS5pc1BsYWNlZCA9PT0gZmFsc2UpIGNhblN0YXJ0ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhblN0YXJ0KSB7XG4gICAgICAgICAgICBhY3RpdmF0ZVN0YXJ0QnV0dG9uKClcbiAgICAgICAgfVxuICAgICAgICAvLyBvciBzZXROb3RQbGFjZWQgaWYgbW92aW5nIHRoZSBzaGlwXG4gICAgICAgIC8vIHRoZW4gYWN0aXZhdGUgdGhlIHBsYXkgYnV0dG9uXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGlkZVBvcFVwKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZVN0YXJ0QnV0dG9uKCkge1xuICAgICAgICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydC1idXR0b24nKVxuICAgICAgICBzdGFydEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICBjb25zb2xlLmxvZyhzdGFydEJ1dHRvbilcblxuICAgIH1cblxuICAgIGJvZHlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3RhcnQtYnV0dG9uJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc5MjcnKVxuICAgICAgICAgICAgYWRkVG9QbGF5ZXJHYW1lQm9hcmQoKTtcbiAgICAgICAgICAgIGhpZGVQb3BVcCgpO1xuICAgICAgICAgICAgLy8gaSBzaW5jZXJlbHkgaG9wZSB0aGF0IHRoaXMgd2lsbCBwb3B1bGF0ZSBwbGF5ZXIgZ2FtZWJvYXJkLCBpIGRvbid0IHRoaW5rIGl0IHdpbGwgdGhvdWd0aDpcbiAgICAgICAgICAgIGRpc3BsYXlCb3RoR2FtZWJvYXJkcygpO1xuICAgICAgICB9XG5cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gZ2V0TGVuZ3RoQW5kT3JpZW50YXRpb25Gcm9tSGVhZENsYXNzKGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRTaGlwRnJvbUNsYXNzTGlzdEFuZFBlcmZvcm1BY3Rpb24obGlzdCwgKHNoaXApID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgc2hpcExpc3Rbc2hpcF0ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHNoaXBMaXN0W3NoaXBdLm9yaWVudGF0aW9uLFxuICAgICAgICAgICAgXVxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkVG9QbGF5ZXJHYW1lQm9hcmQoKSB7XG4gICAgICAgIC8vbmVlZHMgdG8gdGFrZSBwaWVjZXMgZnJvbSB0aGUgZ3JpZFxuICAgICAgICBjb25zdCBzaGlwSGVhZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hpcC1oZWFkJylcbiAgICAgICAgc2hpcEhlYWRzLmZvckVhY2goaGVhZCA9PiB7XG4gICAgICAgICAgICBsZXQgW2xlbmd0aCwgb3JpZW50YXRpb25dID0gZ2V0TGVuZ3RoQW5kT3JpZW50YXRpb25Gcm9tSGVhZENsYXNzKGhlYWQuY2xhc3NMaXN0KVxuICAgICAgICAgICAgZ2FtZUNvbnRyb2xsZXIuZ2V0UGxheWVyR2FtZWJvYXJkKCkucGxhY2VTaGlwKFxuICAgICAgICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbixcbiAgICAgICAgICAgICAgICBbcGFyc2VJbnQoaGVhZC5kYXRhc2V0LmNvbCksXG4gICAgICAgICAgICAgICAgcGFyc2VJbnQoaGVhZC5kYXRhc2V0LnJvdyldXG4gICAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBkZXRlcm1pbmVNYXJrKHNwYWNlLCBlbGVtZW50KSB7XG5cbiAgICAgICAgaWYgKCFzcGFjZS5oYXNTaGlwICYmICFzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJyAnO1xuICAgICAgICBpZiAoc3BhY2UuaGFzU2hpcCAmJiAhc3BhY2Uud2FzR3Vlc3NlZCkgZWxlbWVudC50ZXh0Q29udGVudCA9ICcuJ1xuICAgICAgICBpZiAoIXNwYWNlLmhhc1NoaXAgJiYgc3BhY2Uud2FzR3Vlc3NlZCkgZWxlbWVudC50ZXh0Q29udGVudCA9ICdcXHUwMEI3JztcbiAgICAgICAgaWYgKHNwYWNlLmhhc1NoaXAgJiYgc3BhY2Uud2FzR3Vlc3NlZCkgYWRkSWNvbihlbGVtZW50LCAnI3gtdGVtcGxhdGUnKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRldGVybWluZVRleHQoc3BhY2UpIHtcbiAgICAgICAgLy8gYnJ1aCBhaW50IHRoaXMgbWlkZGxlIGRvdFxuICAgICAgICBpZiAoIXNwYWNlLmhhc1NoaXAgJiYgIXNwYWNlLndhc0d1ZXNzZWQpIHJldHVybiAnICc7XG4gICAgICAgIGlmIChzcGFjZS5oYXNTaGlwICYmICFzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJy4nXG4gICAgICAgIGlmICghc3BhY2UuaGFzU2hpcCAmJiBzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJ1xcdTAwQjcnXG4gICAgICAgIGlmIChzcGFjZS5oYXNTaGlwICYmIHNwYWNlLndhc0d1ZXNzZWQpIHJldHVybiAneCdcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZXRlcm1pbmVDZWxsU3R5bGUoc3BhY2UpIHtcbiAgICAgICAgaWYgKCFzcGFjZS5oYXNTaGlwICYmICFzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJ2NsaWNrYWJsZSdcbiAgICAgICAgaWYgKHNwYWNlLmhhc1NoaXAgJiYgIXNwYWNlLndhc0d1ZXNzZWQpIHJldHVybiAnY2xpY2thYmxlJ1xuICAgICAgICBpZiAoIXNwYWNlLmhhc1NoaXAgJiYgc3BhY2Uud2FzR3Vlc3NlZCkgcmV0dXJuICd1bmNsaWNrYWJsZSdcbiAgICAgICAgaWYgKHNwYWNlLmhhc1NoaXAgJiYgc3BhY2Uud2FzR3Vlc3NlZCkgcmV0dXJuICd1bmNsaWNrYWJsZSdcbiAgICB9XG5cbiAgICAvLyBhbHNvLCBtYWtlIGRpdnMgY2xpY2thYmxlIGluIGNzcy4gZG9uJ3QgYWxsb3cgY2xpY2tzIG9uIGFscmVhZHkgY2xpY2tlZC5cbiAgICAvLyBtYWtlIG9ubHkgdGhlIGxlZnQgZ2FtZWJvYXJkIGNsaWNrYWJsZVxuXG4gICAgLy8gZ2FtZSBjb2RlXG5cbiAgICBmdW5jdGlvbiBhZGRJY29uKGVsLCBpY29uU2VsZWN0b3IpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGljb25TZWxlY3RvcilcbiAgICAgICAgY29uc3QgY2xvbmUgPSB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxuICAgICAgICBlbC5hcHBlbmRDaGlsZChjbG9uZS5jaGlsZHJlblswXSlcbiAgICB9XG5cbiAgICAvLyBtYXliZSBzZXQgdGltZW91dCBmb3IgZW5lbXkuLi4gd2FpdCBhIGJpdFxuICAgIGZ1bmN0aW9uIGRpc3BsYXlQbGF5ZXJHYW1lYm9hcmQoZ2FtZWJvYXJkKSB7XG4gICAgICAgIGxldCBnYW1lYm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkLWNvbnRhaW5lci5yaWdodCcpXG4gICAgICAgIGdhbWVib2FyZC5ncmlkLm1hcCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IHJvd0VsZW1lbnQgPSBwb3B1bGF0ZUVsZW1lbnRJbmZvKCdkaXYnLCBudWxsLCBnYW1lYm9hcmRDb250YWluZXIsICdyb3cnKTtcbiAgICAgICAgICAgIHJvdy5tYXAoKHNwYWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gcG9wdWxhdGVFbGVtZW50SW5mbygnZGl2JywgZGV0ZXJtaW5lVGV4dChzcGFjZSksIHJvd0VsZW1lbnQsICdjb2x1bW4nKVxuICAgICAgICAgICAgICAgIC8vIGxldCBzcGFjZUVsZW1lbnQgPSBwb3B1bGF0ZUVsZW1lbnRJbmZvKCdkaXYnLCBkZXRlcm1pbmVUZXh0KHNwYWNlKSwgcm93RWxlbWVudCwgJ2NvbHVtbicpXG4gICAgICAgICAgICAgICAgbGV0IHNwYWNlRWxlbWVudCA9IHBvcHVsYXRlRWxlbWVudEluZm8oJ2RpdicsIG51bGwsIHJvd0VsZW1lbnQsICdjb2x1bW4nKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwYWNlKVxuICAgICAgICAgICAgICAgIGRldGVybWluZU1hcmsoc3BhY2UsIHNwYWNlRWxlbWVudClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gbWFrZSBlbmVteSAoY29tcHV0ZXIpIGdhbWVib2FyZCBjbGlja2FibGVcbiAgICBmdW5jdGlvbiBkaXNwbGF5Q29tcHV0ZXJHYW1lYm9hcmQoZ2FtZWJvYXJkKSB7XG4gICAgICAgIGxldCBnYW1lYm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkLWNvbnRhaW5lci5sZWZ0JylcbiAgICAgICAgZ2FtZWJvYXJkLmdyaWQubWFwKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgICBsZXQgcm93RWxlbWVudCA9IHBvcHVsYXRlRWxlbWVudEluZm8oJ2RpdicsIG51bGwsIGdhbWVib2FyZENvbnRhaW5lciwgJ3JvdycpO1xuICAgICAgICAgICAgcm93Lm1hcCgoc3BhY2UsIGNvbEluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IHNwYWNlRWxlbWVudCA9IHBvcHVsYXRlRWxlbWVudEluZm8oJ2RpdicsIGRldGVybWluZVRleHQoc3BhY2UpLCByb3dFbGVtZW50LCAnY29sdW1uJywgIGRldGVybWluZUNlbGxTdHlsZShzcGFjZSkgKVxuICAgICAgICAgICAgICAgIGxldCBzcGFjZUVsZW1lbnQgPSBwb3B1bGF0ZUVsZW1lbnRJbmZvKCdkaXYnLCBudWxsLCByb3dFbGVtZW50LCAnY29sdW1uJywgIGRldGVybWluZUNlbGxTdHlsZShzcGFjZSkgKVxuICAgICAgICAgICAgICAgIGRldGVybWluZU1hcmsoc3BhY2UsIHNwYWNlRWxlbWVudClcbiAgICAgICAgICAgICAgICBzcGFjZUVsZW1lbnQuZGF0YXNldC5jb2wgPSBjb2xJbmRleDtcbiAgICAgICAgICAgICAgICBzcGFjZUVsZW1lbnQuZGF0YXNldC5yb3cgPSByb3dJbmRleDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy9ob3ZlcmluZyBvdmVyIHRoZSBwbGF5YWJsZSBnYW1lYm9hcmRcbiAgICBib2R5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbGlja2FibGUnKSkge1xuICAgICAgICAgICAgcmVtb3ZlSG92ZXJlZENsYXNzKCdnYW1lLWhvdmVyaW5nJylcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2dhbWUtaG92ZXJpbmcnKVxuICAgICAgICB9XG4gICAgfSlcblxuXG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5Qm90aEdhbWVib2FyZHMoKSB7XG4gICAgICAgIGRpc3BsYXlQbGF5ZXJHYW1lYm9hcmQoZ2FtZUNvbnRyb2xsZXIuZ2V0UGxheWVyR2FtZWJvYXJkKCkpXG4gICAgICAgIGRpc3BsYXlDb21wdXRlckdhbWVib2FyZChnYW1lQ29udHJvbGxlci5nZXRDb21wdXRlckdhbWVib2FyZCgpKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUJvdGhHYW1lQm9hcmRzKCkge1xuICAgICAgICBsZXQgZ2FtZWJvYXJkQ29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYW1lYm9hcmQtY29udGFpbmVyJylcbiAgICAgICAgZ2FtZWJvYXJkQ29udGFpbmVycy5mb3JFYWNoKGNvbnRhaW5lciA9PiBjb250YWluZXIudGV4dENvbnRlbnQgPSBcIlwiKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENsaWNrYWJsZXMoKSB7XG5cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUnKVxuICAgIH1cblxuICAgIC8vIHRoZSBnYW1lIGxvb3AgaXMgaGVyZVxuXG4gICAgLy8gd291bGQgaSBuZWVkIHRvIGNvbnNpZGVyIGEgZnV0dXJlIDIgcGxheWVyIHZlcnNpb24/XG5cbiAgICBjcmVhdGVQcmVHYW1lR3JpZCgpO1xuICAgIC8vIGRpc3BsYXlCb3RoR2FtZWJvYXJkcygpO1xuICAgIC8vIGJ1dCB0aGVzZSBuZWVkIHBsYXllckdhbWVib2FyZCBhbmQgY29tcHV0ZXJHYW1lYm9hcmQuLi4gXG4gICAgLy8gZmlndXJlIGl0IG91dCBmcm9tIHRpYyB0YWMgdG9lLi4uXG4gICAgLy8gZm9yIGVhY2ggb2YgdGhlc2Ugc3BhY2VzXG4gICAgLy8gaWYgY2xpY2tlZCwgdGhlbiBwbGF5IGEgcm91bmRcbiAgICAvLyB0aGlzIG1lYW5zIHVzaW5nIGF0dGFjaywgdXNpbmcgdGhlIGNvb3JkaW5hdGVzLi4uIGkgcG9zc2libHkgbmVlZCB0byBhZGQgZGF0YS5jb2wgYW5kIGRhdGEucm93Li4uIG9rYXlcblxuICAgIGZ1bmN0aW9uIGNoZWNrSWZHYW1lT3ZlcigpIHtcbiAgICAgICAgcmV0dXJuIGdhbWVDb250cm9sbGVyLmdldElzR2FtZU92ZXIoKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBtYXliZSBkaXNhYmxlIGFsbD8gdHVybiBhbGwgY2xpY2thYmxlcyBpbnRvIHVuY2xpY2thYmxlXG4gICAgZnVuY3Rpb24gc2V0R2FtZU92ZXIoKSB7XG4gICAgICAgIGNvbnN0IGVuZW15R3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUnKVxuICAgICAgICBlbmVteUdyaWQuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdjbGlja2FibGUnKVxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgndW5jbGlja2FibGUnKVxuICAgICAgICB9KVxuICAgIH1cblxuXG4gICAgYm9keUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZWwpID0+IHtcbiAgICAgICAgaWYgKGVsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NsaWNrYWJsZScpKSB7XG4gICAgICAgICAgICBjb25zdCBzcGFjZSA9IGVsLnRhcmdldC5kYXRhc2V0O1xuICAgICAgICAgICAgZ2FtZUNvbnRyb2xsZXIucGxheVJvdW5kKFtwYXJzZUludChzcGFjZS5jb2wpLCBwYXJzZUludChzcGFjZS5yb3cpXSlcbiAgICAgICAgICAgIHJlbW92ZUJvdGhHYW1lQm9hcmRzKCk7XG4gICAgICAgICAgICBkaXNwbGF5Qm90aEdhbWVib2FyZHMoKTtcblxuICAgICAgICAgICAgaWYgKGNoZWNrSWZHYW1lT3ZlcigpKSBzZXRHYW1lT3ZlcigpXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYicpXG4gICAgICAgICAgICAgICAgZ2FtZUNvbnRyb2xsZXIucGxheVJvdW5kKCk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQm90aEdhbWVCb2FyZHMoKTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5Qm90aEdhbWVib2FyZHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59XG5cblxuXG5leHBvcnQge1xuICAgIG1ha2VEaXNwbGF5Q29udHJvbGxlcixcbn0iLCJpbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IFBsYXllciwgQ29tcHV0ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbi8vIGltcG9ydCB7IGRpc3BsYXlQbGF5ZXJHYW1lYm9hcmQsIGRpc3BsYXlDb21wdXRlckdhbWVib2FyZH0gZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXJcIjtcblxuLy8gaSBuZWVkIHRvIGNoYW5nZSB0aGlzIGEgbGl0dGxlXG4vLyBuZWVkIHRvIGRpc3BsYXkgYm90aCBnYW1lYm9hcmRzLi4uXG5leHBvcnQgZnVuY3Rpb24gbWFrZUdhbWVDb250cm9sbGVyKCkge1xuICAgIC8vIGF0IHNvbWUgcG9pbnQsIHdpbGwgbmVlZCB0byBkZXZlbG9wIGZ1bmN0aW9uIHRvIHBsYWNlQWxsU2hpcHMsIHdoaWNoIFxuXG4gICAgbGV0IHBsYXllckdhbWVib2FyZCA9IG5ldyBHYW1lYm9hcmQoKTtcbiAgICBsZXQgY29tcHV0ZXJHYW1lYm9hcmQgPSBuZXcgR2FtZWJvYXJkKCk7XG5cbiAgICBjb25zdCBnZXRQbGF5ZXJHYW1lYm9hcmQgPSAoKSA9PiBwbGF5ZXJHYW1lYm9hcmRcbiAgICBjb25zdCBnZXRDb21wdXRlckdhbWVib2FyZCA9ICgpID0+IGNvbXB1dGVyR2FtZWJvYXJkXG5cbiAgICBjb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBuZXcgQ29tcHV0ZXIoKTtcblxuICAgIGxldCBjdXJyZW50UGxheWVyID0gcGxheWVyO1xuICAgIGxldCBlbmVteUdhbWVib2FyZCA9IGNvbXB1dGVyR2FtZWJvYXJkXG5cbiAgICBsZXQgaXNHYW1lT3ZlciA9IGZhbHNlO1xuXG4gICAgY29uc3QgZ2V0RW5lbXlHYW1lYm9hcmQgPSAoKSA9PiBlbmVteUdhbWVib2FyZFxuXG4gICAgZnVuY3Rpb24gdHJ5UmFuZG9tUGxhY2VtZW50VW50aWxTdWNjZXNzKGxlbmd0aCkge1xuICAgICAgICAvLyBnZXQgcmVmZXJlbmNlIHRvIGdhbWVib2FyZDsgXG4gICAgICAgIC8vIG1heWJlIGlmIG5vdCBzdWNjZXNzZnVsLCBvbGRTaGlwQ29vcmRzIGJlY29tZXMgdGhpcy4uLiBwaG9vZXlcbiAgICAgICAgbGV0IG9sZFNoaXBDb29yZHMgPSBKU09OLnN0cmluZ2lmeShnZXRDb21wdXRlckdhbWVib2FyZCgpLmFsbFNoaXBDb29yZHMpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG9sZFNoaXBDb29yZHMpXG4gICAgICAgIC8vIGdldCByZWZlcmVuY2UgdG8gbmV3IGdhbWVib2FyZFxuICAgICAgICBsZXQgbmV3U2hpcENvb3JkcyA9IG9sZFNoaXBDb29yZHNcbiAgICAgICAgLy8gZ2V0IHJhbmRvbSBvcmllbnRhdGlvbiBhbmQgcmFuZG9tIGNvbHVtbiBhbmQgcm93LCBib3RoIGJldHdlZW4gMCBhbmQgOVxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbU9yaWVudGF0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIFsnaG9yaXpvbnRhbCcsICd2ZXJ0aWNhbCddW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSldXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGVzKCkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tQ29sID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICAgICAgICBjb25zdCByYW5kb21Sb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJhbmRvbUNvbCwgcmFuZG9tUm93KVxuICAgICAgICAgICAgcmV0dXJuIFtyYW5kb21Db2wsIHJhbmRvbVJvd11cbiAgICAgICAgfVxuICAgICAgICBsZXQgaXNWYWxpZFBsYWNlbWVudCA9IGZhbHNlXG4gICAgICAgIC8vIGhhdmUgaXNWYWxpZFBsYWNlbWVudCBzZXQgdG8gZmFsc2VcbiAgICAgICAgLy8gd2hpbGUgKCFpc1ZhbGlkUGxhY2VtZW50KSB7XG4gICAgICAgICAgICAvLyBpZiB2ZXJ0aWNhbFxuICAgICAgICAgICAgLy8gcGxhY2Ugc2hpcFxuICAgICAgICAgICAgLy8gaWYgb2xkR2FtZWJvYXJkJ3MgaGFzIFNoaXAgIT09IG5ld0dhbWVib2FyZCdzIGhhcyBTaGlwIHRoZW4gc2V0IHZhbGlkcGxhY2VtZW50XG4gICAgICAgIC8vIH1cblxuICAgICAgICB3aGlsZSAoIWlzVmFsaWRQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChnZW5lcmF0ZVJhbmRvbU9yaWVudGF0aW9uKCkgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0cnkgaG9yaXpvbnRhbCBwbGFjZW1lbnQnKVxuICAgICAgICAgICAgICAgIGdldENvbXB1dGVyR2FtZWJvYXJkKCkucGxhY2VTaGlwKGxlbmd0aCwgJ2hvcml6b250YWwnLCBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGVzKCkpXG4gICAgICAgICAgICAgICAgbmV3U2hpcENvb3JkcyA9IEpTT04uc3RyaW5naWZ5KGdldENvbXB1dGVyR2FtZWJvYXJkKCkuYWxsU2hpcENvb3JkcylcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmV3IHNoaXAgY29vcmRzOiAke25ld1NoaXBDb29yZHN9YClcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdTaGlwQ29vcmRzKVxuICAgICAgICAgICAgICAgIGlmIChvbGRTaGlwQ29vcmRzICE9PSBuZXdTaGlwQ29vcmRzKSBpc1ZhbGlkUGxhY2VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpc1ZhbGlkUGxhY2VtZW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2VuZXJhdGVSYW5kb21PcmllbnRhdGlvbigpID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RyeSB2ZXJ0aWNhbCBwbGFjZW1lbnQnKVxuICAgICAgICAgICAgICAgIGdldENvbXB1dGVyR2FtZWJvYXJkKCkucGxhY2VTaGlwKGxlbmd0aCwgJ3ZlcnRpY2FsJywgZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlcygpKVxuICAgICAgICAgICAgICAgIG5ld1NoaXBDb29yZHMgPSBKU09OLnN0cmluZ2lmeShnZXRDb21wdXRlckdhbWVib2FyZCgpLmFsbFNoaXBDb29yZHMpXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYG5ldyBzaGlwIGNvb3JkczogJHtuZXdTaGlwQ29vcmRzfWApXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3U2hpcENvb3JkcylcbiAgICAgICAgICAgICAgICBpZiAob2xkU2hpcENvb3JkcyAhPT0gbmV3U2hpcENvb3JkcykgaXNWYWxpZFBsYWNlbWVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXNWYWxpZFBsYWNlbWVudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNvbWVob3csIGknbGwgbmVlZCB0byBnZXQgdGhlIGdyaWQgcGxhY2VkIHNoaXBzLCBhbmQgY29udmVydCB0aGVtIGludG8gdGhpcy5cbiAgICAvLyB3YWl0LCBpcyB0aGlzIG1vY2tpbmc/IGl0IG1heSBiZSB3b3J0aCBhIHJlYWQgYWdhaW4uLi5cbiAgICAvLyBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKDUsICd2ZXJ0aWNhbCcsIFs5LDZdKTtcbiAgICAvLyBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKDQsICdob3Jpem9udGFsJywgWzAsOF0pO1xuICAgIC8vIHBsYXllckdhbWVib2FyZC5wbGFjZVNoaXAoMywgJ3ZlcnRpY2FsJywgWzUsNl0pO1xuICAgIC8vIHBsYXllckdhbWVib2FyZC5wbGFjZVNoaXAoMywgJ2hvcml6b250YWwnLCBbMiwzXSk7XG4gICAgLy8gcGxheWVyR2FtZWJvYXJkLnBsYWNlU2hpcCgyLCAndmVydGljYWwnLCBbMSwyXSk7XG5cbiAgICBmdW5jdGlvbiBwbGFjZUFsbFNoaXBzT25Db21wdXRlckJvYXJkKCkge1xuICAgICAgICB0cnlSYW5kb21QbGFjZW1lbnRVbnRpbFN1Y2Nlc3MoNSlcbiAgICAgICAgdHJ5UmFuZG9tUGxhY2VtZW50VW50aWxTdWNjZXNzKDQpXG4gICAgICAgIHRyeVJhbmRvbVBsYWNlbWVudFVudGlsU3VjY2VzcygzKVxuICAgICAgICB0cnlSYW5kb21QbGFjZW1lbnRVbnRpbFN1Y2Nlc3MoMylcbiAgICAgICAgdHJ5UmFuZG9tUGxhY2VtZW50VW50aWxTdWNjZXNzKDIpXG4gICAgfVxuXG4gICAgcGxhY2VBbGxTaGlwc09uQ29tcHV0ZXJCb2FyZCgpO1xuXG4gICAgLy8gbWF5YmUgaSBuZWVkIHRvIGNoYW5nZSB0aGlzPyBtYXliZSBub3QhXG4gICAgZnVuY3Rpb24gc3dhcFBsYXllckFuZEVuZW15KCkge1xuICAgICAgICBjdXJyZW50UGxheWVyID09PSBwbGF5ZXIgPyBjdXJyZW50UGxheWVyID0gY29tcHV0ZXIgOiBjdXJyZW50UGxheWVyID0gcGxheWVyO1xuICAgICAgICBlbmVteUdhbWVib2FyZCA9PT0gcGxheWVyR2FtZWJvYXJkID8gZW5lbXlHYW1lYm9hcmQgPSBjb21wdXRlckdhbWVib2FyZCA6IGVuZW15R2FtZWJvYXJkID0gcGxheWVyR2FtZWJvYXJkO1xuICAgIH1cblxuICAgIC8vIGlmIGdhbWUgaXMgb3Zlciwgc2V0IHRoZSBpc0dhbWVPdmVyIHZhcmlhYmxlIHRvIHRydWUgdG8gZW5kIHRoZSB3aGlsZSBsb29wLlxuICAgIGZ1bmN0aW9uIGNoZWNrSXNHYW1lT3ZlcihnYW1lYm9hcmQpIHtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5jaGVja0lzR2FtZU92ZXIoKSkgaXNHYW1lT3ZlciA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0SXNHYW1lT3Zlcj0gKCkgPT4gaXNHYW1lT3ZlclxuICAgIFxuICAgIGZ1bmN0aW9uIHZpc3VhbGlzZUdhbWVib2FyZChnYW1lYm9hcmQpIHtcbiAgICAgICAgLy8gaG93IGRvIGkgY29udmVydCB0aGUgZ2FtZWJvYXJkIHdpdGggdGhlIHNwYWNlcywgaW50byBhIGNvbnNvbGUgbG9nP1xuICAgICAgICAvLyBtYXliZSBhIGRvdWJsZSBtYXBcbiAgICAgICAgZ2FtZWJvYXJkLmdyaWQubWFwKHJvdyA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIHJvdy5tYXAoc3BhY2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHNwYWNlLmhhc1NoaXAgPT09IGZhbHNlICYmIHNwYWNlLndhc0d1ZXNzZWQgPT09IGZhbHNlKSByZXR1cm4gJ18nXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc3BhY2UuaGFzU2hpcCA9PT0gZmFsc2UgJiYgc3BhY2Uud2FzR3Vlc3NlZCA9PT0gdHJ1ZSkgcmV0dXJuICdtJ1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNwYWNlLmhhc1NoaXAgPT09IHRydWUgJiYgc3BhY2Uud2FzR3Vlc3NlZCA9PT0gZmFsc2UpIHJldHVybiAnbydcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzcGFjZS5oYXNTaGlwID09PSB0cnVlICYmIHNwYWNlLndhc0d1ZXNzZWQgPT09IHRydWUpIHJldHVybiAneCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJ5UmFuZG9tQXR0YWNrVW50aWxTdWNjZXNzKCkge1xuXG4gICAgICAgIGxldCBpbml0aWFsR3Vlc3NlcyA9IEpTT04uc3RyaW5naWZ5KGVuZW15R2FtZWJvYXJkLmd1ZXNzZWRDb29yZHMpXG4gICAgICAgIGxldCBjdXJyZW50R3Vlc3NlcyA9IGluaXRpYWxHdWVzc2VzO1xuICAgICAgICBsZXQgdmFsaWRQbGF5TWFkZSA9IGZhbHNlO1xuICAgICAgICB3aGlsZSAoIXZhbGlkUGxheU1hZGUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIucmFuZG9tQXR0YWNrKGVuZW15R2FtZWJvYXJkKVxuICAgICAgICAgICAgY3VycmVudEd1ZXNzZXMgPSBKU09OLnN0cmluZ2lmeShlbmVteUdhbWVib2FyZC5ndWVzc2VkQ29vcmRzKVxuICAgICAgICAgICAgaWYgKGluaXRpYWxHdWVzc2VzICE9PSBjdXJyZW50R3Vlc3NlcykgdmFsaWRQbGF5TWFkZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGF5Um91bmQoY29vcmRzPW51bGwpIHtcblxuICAgICAgICBzd2l0Y2ggKGN1cnJlbnRQbGF5ZXIpIHtcbiAgICAgICAgICAgIGNhc2UgcGxheWVyOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5ZXInKVxuICAgICAgICAgICAgICAgIC8vIHZpc3VhbGlzZUdhbWVib2FyZChlbmVteUdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5hdHRhY2soZW5lbXlHYW1lYm9hcmQsY29vcmRzKVxuICAgICAgICAgICAgICAgIGNoZWNrSXNHYW1lT3ZlcihlbmVteUdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgc3dhcFBsYXllckFuZEVuZW15KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgY29tcHV0ZXI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbXB1dGVyJylcbiAgICAgICAgICAgICAgICAvLyB2aXN1YWxpc2VHYW1lYm9hcmQoZW5lbXlHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIHRyeVJhbmRvbUF0dGFja1VudGlsU3VjY2VzcygpO1xuICAgICAgICAgICAgICAgIGNoZWNrSXNHYW1lT3ZlcihlbmVteUdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgc3dhcFBsYXllckFuZEVuZW15KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGxheVJvdW5kLFxuICAgICAgICAgICAgZ2V0UGxheWVyR2FtZWJvYXJkLFxuICAgICAgICAgICAgZ2V0Q29tcHV0ZXJHYW1lYm9hcmQsXG4gICAgICAgICAgICBnZXRJc0dhbWVPdmVyLFxuICAgICAgICB9XG59Il0sIm5hbWVzIjpbIl9fX0NTU19MT0FERVJfRVhQT1JUX19fIiwicHVzaCIsIm1vZHVsZSIsImlkIiwiZXhwb3J0cyIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNvbnRlbnQiLCJuZWVkTGF5ZXIiLCJjb25jYXQiLCJsZW5ndGgiLCJqb2luIiwiaSIsIm1vZHVsZXMiLCJtZWRpYSIsImRlZHVwZSIsInN1cHBvcnRzIiwibGF5ZXIiLCJ1bmRlZmluZWQiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiayIsIl9rIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJiYXNlNjQiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwic291cmNlTWFwcGluZyIsInN0eWxlc0luRE9NIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibW9kdWxlc1RvRG9tIiwib3B0aW9ucyIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsImJhc2UiLCJjb3VudCIsImluZGV4QnlJZGVudGlmaWVyIiwib2JqIiwiY3NzIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJhZGRFbGVtZW50U3R5bGUiLCJieUluZGV4Iiwic3BsaWNlIiwiYXBpIiwiZG9tQVBJIiwidXBkYXRlIiwibmV3T2JqIiwicmVtb3ZlIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsImluZGV4IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJtZW1vIiwiaW5zZXJ0Iiwic3R5bGUiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJnZXRUYXJnZXQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsInN0eWxlRWxlbWVudCIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGVUYWdUcmFuc2Zvcm0iLCJhcHBseSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJuYyIsImxvY2FscyIsIlNoaXAiLCJjb25zdHJ1Y3RvciIsImhpdHMiLCJzdW5rIiwic2V0U3VuayIsImhpdCIsImlzU3VuayIsIlNwYWNlIiwiaGFzU2hpcCIsIndhc0d1ZXNzZWQiLCJtaXNzZWRIaXQiLCJzaGlwIiwiR2FtZWJvYXJkIiwiZ3JpZCIsIm5ld0dyaWQiLCJyb3ciLCJqIiwic3F1YXJlIiwiY3JlYXRlR3JpZCIsImFsbFNoaXBDb29yZHMiLCJndWVzc2VkQ29vcmRzIiwiaXNPdXRPZkJvdW5kcyIsImNvbCIsImNoZWNrSWZBbHJlYWR5UGxhY2VkIiwicG9wdWxhdGVTaGlwQ29vcmRzQXJyYXkiLCJwbGFjZVNoaXAiLCJvcmllbnRhdGlvbiIsInN0YXJ0Q29sIiwic3RhcnRSb3ciLCJpbnZhbGlkUGxhY2VtZW50IiwibmV3U2hpcCIsImluaXRpYWxpc2VTaGlwIiwiY29uc29sZSIsImxvZyIsImdldFBvc2l0aW9uIiwiY2hlY2tTaGlwRXhpc3RzIiwiZ2V0U2hpcCIsImNoZWNrTWlzc2VkSGl0IiwiY2hlY2tXYXNHdWVzc2VkIiwiY2hlY2tJc0dhbWVPdmVyIiwiY29udmVydGVkQWxsU2hpcENvb3JkcyIsImNvb3JkIiwiY29udmVydGVkR3Vlc3NlZENvb3JkcyIsImV2ZXJ5Iiwic2hpcENvb3JkIiwiaW5jbHVkZXMiLCJyZWNlaXZlQXR0YWNrIiwiUGxheWVyIiwiY29tcHV0ZXIiLCJhdHRhY2siLCJnYW1lYm9hcmQiLCJDb21wdXRlciIsInN1cGVyIiwicmFuZG9tQXR0YWNrIiwicmFuZG9tQ29sIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmFuZG9tUm93IiwiZ2FtZUNvbnRyb2xsZXIiLCJwbGF5ZXJHYW1lYm9hcmQiLCJjb21wdXRlckdhbWVib2FyZCIsImdldENvbXB1dGVyR2FtZWJvYXJkIiwicGxheWVyIiwiY3VycmVudFBsYXllciIsImVuZW15R2FtZWJvYXJkIiwiaXNHYW1lT3ZlciIsInRyeVJhbmRvbVBsYWNlbWVudFVudGlsU3VjY2VzcyIsIm9sZFNoaXBDb29yZHMiLCJuZXdTaGlwQ29vcmRzIiwiZ2VuZXJhdGVSYW5kb21PcmllbnRhdGlvbiIsInJvdW5kIiwiZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlcyIsImlzVmFsaWRQbGFjZW1lbnQiLCJzd2FwUGxheWVyQW5kRW5lbXkiLCJwbGF5Um91bmQiLCJjb29yZHMiLCJpbml0aWFsR3Vlc3NlcyIsImN1cnJlbnRHdWVzc2VzIiwidmFsaWRQbGF5TWFkZSIsInRyeVJhbmRvbUF0dGFja1VudGlsU3VjY2VzcyIsImdldFBsYXllckdhbWVib2FyZCIsImdldElzR2FtZU92ZXIiLCJtYWtlR2FtZUNvbnRyb2xsZXIiLCJjdXJyZW50U2hpcCIsIm1vdmluZ1NoaXAiLCJjdXJyZW50bHlSb3RhdGluZyIsImRpc2FibGVDdXJyZW50bHlSb3RhdGluZyIsInNldE1vdmluZ1NoaXBUb0ZhbHNlIiwiZmluZFNoaXBGcm9tQ2xhc3NMaXN0QW5kUGVyZm9ybUFjdGlvbiIsImFjdGlvbiIsImNvbnRhaW5zIiwic2hpcExpc3QiLCJpc1BsYWNlZCIsImdldEN1cnJlbnRTaGlwT3JpZW50YXRpb24iLCJkZWNsYXJlQ3VycmVudFNoaXBQbGFjZWQiLCJnZXRDdXJyZW50U2hpcCIsInNldEN1cnJlbnRTaGlwIiwic2V0Q3VycmVudFNoaXBGcm9tRE9NIiwiY2xhc3NMaXN0IiwicmVzZXRDdXJyZW50U2hpcCIsImdldEN1cnJlbnRTaGlwTGVuZ3RoIiwiYm9keUVsZW1lbnQiLCJwb3B1bGF0ZUVsZW1lbnRJbmZvIiwiZGl2VHlwZSIsInRleHQiLCJwYXJlbnQiLCJjbGFzc2VzIiwibmV3RWxlbWVudCIsImZvckVhY2giLCJjbGFzc05hbWUiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZUhvdmVyZWRDbGFzcyIsImhvdmVyZWRFbGVtZW50U2VsZWN0b3IiLCJob3ZlcmluZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzcGFjZSIsInJlbW92ZUFsbEhvdmVyZWQiLCJyZW1vdmVDbGFzc0Zyb21QcmV2aW91c2x5U2VsZWN0ZWQiLCJwcmV2aW91c1NlbGVjdGVkU2hpcCIsIm1hcmtWYWxpZEhvdmVyIiwibWFya0ludmFsaWRIb3ZlciIsImV4dGVuZE1haW5Ib3ZlciIsImNsaWNrVGFyZ2V0IiwiaGVhZFJvdyIsInBhcnNlSW50IiwiZGF0YXNldCIsImhlYWRDb2wiLCJzaGlwTGVuZ3RoIiwiZGV0ZXJtaW5lT3RoZXJIb3ZlckVsZW1lbnRzIiwiYWRkU2hpcENsYXNzVG9TcGFjZSIsImFkZFNoaXBIZWFkIiwicmVtb3ZlU2hpcEhlYWQiLCJjdXJyZW50U2hpcEhlYWQiLCJjaGVja0lmQ2xpY2tTaGlwSGVhZCIsInJlbW92ZVNlbGVjdGVkU2hpcERlY29yYXRpb24iLCJyZW1vdmVSb3RhdGVJY29uIiwiaWNvbiIsImNoZWNrSW52YWxpZFBsYWNlbWVudCIsImNhbm5vdFBsYWNlU2hpcCIsInJlbW92ZVNoaXBGcm9tR3JpZCIsInNoaXBOYW1lIiwicmVtb3ZlQ3VycmVudFNoaXBGcm9tR3JpZCIsImNoZWNrSWZDYW5TdGFydEdhbWUiLCJjYW5TdGFydCIsInN0YXJ0QnV0dG9uIiwiZGlzcGxheSIsImFjdGl2YXRlU3RhcnRCdXR0b24iLCJkZXRlcm1pbmVNYXJrIiwiZWwiLCJpY29uU2VsZWN0b3IiLCJjbG9uZSIsImNsb25lTm9kZSIsImNoaWxkcmVuIiwiYWRkSWNvbiIsImRpc3BsYXlCb3RoR2FtZWJvYXJkcyIsImdhbWVib2FyZENvbnRhaW5lciIsInJvd0luZGV4Iiwicm93RWxlbWVudCIsInNwYWNlRWxlbWVudCIsImRpc3BsYXlQbGF5ZXJHYW1lYm9hcmQiLCJjb2xJbmRleCIsImRldGVybWluZUNlbGxTdHlsZSIsImRpc3BsYXlDb21wdXRlckdhbWVib2FyZCIsInJlbW92ZUJvdGhHYW1lQm9hcmRzIiwiY29udGFpbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNoaXBDbGFzcyIsInNob3dSb3RhdGVkSG92ZXIiLCJzaG93Um90YXRlSWNvbiIsImluaXRpYWxHcmlkIiwiY3JlYXRlUHJlR2FtZUdyaWQiLCJtYWtlRGlzcGxheUNvbnRyb2xsZXIiXSwic291cmNlUm9vdCI6IiJ9