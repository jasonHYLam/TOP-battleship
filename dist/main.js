(()=>{"use strict";var e={426:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(537),o=n.n(r),s=n(645),a=n.n(s)()(o());a.push([e.id,"body {\n    margin: 0 auto;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: black;\n}\n.container {\n    display: flex;\n    flex-direction: row;\n    gap: 40px;\n}\n\n.clickable {\n    cursor: pointer;\n}\n\n.gameboard-container {\n    width: 500px;\n    height: 500px;\n    display: flex;\n    flex-direction: column;\n    background-color: bisque;\n}\n\n.row {\n    flex: 1;\n    display: flex;\n}\n\n.column {\n    flex: 1;\n    background-color: grey;\n    /* justify-content: center; */\n    text-align: center;\n}\n\n\n","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;IACI,cAAc;IACd,YAAY;IACZ,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,uBAAuB;AAC3B;AACA;IACI,aAAa;IACb,mBAAmB;IACnB,SAAS;AACb;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,YAAY;IACZ,aAAa;IACb,aAAa;IACb,sBAAsB;IACtB,wBAAwB;AAC5B;;AAEA;IACI,OAAO;IACP,aAAa;AACjB;;AAEA;IACI,OAAO;IACP,sBAAsB;IACtB,6BAA6B;IAC7B,kBAAkB;AACtB",sourcesContent:["body {\n    margin: 0 auto;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: black;\n}\n.container {\n    display: flex;\n    flex-direction: row;\n    gap: 40px;\n}\n\n.clickable {\n    cursor: pointer;\n}\n\n.gameboard-container {\n    width: 500px;\n    height: 500px;\n    display: flex;\n    flex-direction: column;\n    background-color: bisque;\n}\n\n.row {\n    flex: 1;\n    display: flex;\n}\n\n.column {\n    flex: 1;\n    background-color: grey;\n    /* justify-content: center; */\n    text-align: center;\n}\n\n\n"],sourceRoot:""}]);const i=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(o," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},a=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],u=s[l]||0,d="".concat(l," ").concat(u);s[l]=u+1;var h=n(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=o(p,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var s=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var i=n(s[a]);t[i].references--}for(var c=r(e,o),l=0;l<s.length;l++){var u=n(s[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=c}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),o=n.n(r),s=n(569),a=n.n(s),i=n(565),c=n.n(i),l=n(216),u=n.n(l),d=n(589),h=n.n(d),p=n(426),f={};f.styleTagTransform=h(),f.setAttributes=c(),f.insert=a().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=u(),t()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals;class A{constructor(e){this.length=e,this.hits=0,this.sunk=!1}setSunk(){this.sunk=!0}hit(){this.hits++}isSunk(){this.length===this.hits&&this.setSunk()}}class m{constructor(){this.hasShip=!1,this.wasGuessed=!1,this.missedHit=!1,this.ship=null}}class g{constructor(){this.grid=function(){let e=[];for(let t=0;t<10;t++){let t=[];for(let e=0;e<10;e++){const e=new m;t.push(e)}e.push(t)}return e}(),this.allShipCoords=[],this.guessedCoords=[]}isOutOfBounds(e,t){return e>9||t>9}checkIfAlreadyPlaced(e,t){return!0===this.grid[t][e].hasShip}populateShipCoordsArray(e,t){this.allShipCoords.push([e,t])}placeShip(e,t,[n,r]){if(this.isOutOfBounds(n,r))return"out of bounds";let o=function(e){if(!(e<1||e>5))return new A(e)}(e);if(o)switch(t){case"horizontal":for(let t=0;t<e;t++){if(this.isOutOfBounds(r,n+t))return"out of bounds";if(this.checkIfAlreadyPlaced(r,n+t))return"position already occupied"}for(let t=0;t<e;t++)this.grid[r][n+t].hasShip=!0,this.grid[r][n+t].ship=o,this.populateShipCoordsArray(n+t,r);break;case"vertical":for(let t=0;t<e;t++){if(this.isOutOfBounds(r+t,n))return"out of bounds";if(this.checkIfAlreadyPlaced(r+t,n))return"position already occupied"}for(let t=0;t<e;t++)this.grid[r+t][n].hasShip=!0,this.grid[r+t][n].ship=o,this.populateShipCoordsArray(n,r+t)}}placeAllShipsOnBoard(){this.placeShip(5,["horizontal","vertical"].Math.round(Math.random()),[Math.floor(10*Math.random()),Math.floor(10*Math.random())])}getPosition(e,t){return this.grid[t][e]}checkShipExists(e,t){return this.grid[t][e].hasShip}getShip(e,t){return this.grid[t][e].ship}checkMissedHit(e,t){return this.grid[t][e].missedHit}checkWasGuessed(e,t){return this.grid[t][e].wasGuessed}checkIsGameOver(){let e=this.allShipCoords.map((e=>JSON.stringify(e))),t=this.guessedCoords.map((e=>JSON.stringify(e)));return console.log(e),console.log(t),console.log(e.every((e=>t.includes(e)))),e.every((e=>t.includes(e)))}receiveAttack(e,t){if(this.checkWasGuessed(e,t))return"already attacked";this.getPosition(e,t).wasGuessed=!0,this.guessedCoords.push([e,t]),this.checkShipExists(e,t)?(this.getShip(e,t).hit(),this.getShip(e,t).isSunk()):this.getPosition(e,t).missedHit=!0}}class v{constructor(e){}attack(e,[t,n]){e.receiveAttack(t,n)}}class y extends v{constructor(){super()}randomAttack(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());e.checkWasGuessed(t,n)||this.attack(e,[t,n])}}!function(){let e=function(){let e=new g,t=new g;const n=new v,r=new y;let o=n,s=t,a=!1;function i(){o=o===n?r:n,s=s===e?t:e}function c(e){e.checkIsGameOver()&&(a=!0)}return e.placeShip(2,"vertical",[1,2]),t.placeShip(3,"vertical",[5,6]),t.placeShip(2,"vertical",[1,2]),{playRound:function(e=null){switch(o){case n:console.log("player"),o.attack(s,e),c(s),i();break;case r:console.log("computer"),function(){let e=JSON.stringify(s.guessedCoords),t=e,n=!1;for(;!n;)o.randomAttack(s),t=JSON.stringify(s.guessedCoords),e!==t&&(n=!0)}(),c(s),i()}},getPlayerGameboard:()=>e,getComputerGameboard:()=>t}}();function t(e,t=null,n=null,...r){const o=document.createElement(e);return r.forEach((e=>o.classList.add(e))),t&&(o.textContent=t),n&&n.appendChild(o),o}function n(e){return e.hasShip||e.wasGuessed?e.hasShip&&!e.wasGuessed?"o":!e.hasShip&&e.wasGuessed?"m":e.hasShip&&e.wasGuessed?"X":void 0:"."}function r(){!function(e){let r=document.querySelector(".gameboard-container.right");e.grid.map(((e,o)=>{let s=t("div",null,r,"row");e.map((e=>{t("div",n(e),s,"column")}))}))}(e.getPlayerGameboard()),function(e){let r=document.querySelector(".gameboard-container.left");e.grid.map(((e,o)=>{let s=t("div",null,r,"row");e.map(((e,r)=>{let a=t("div",n(e),s,"column",function(e){return e.hasShip||e.wasGuessed?e.hasShip&&!e.wasGuessed?"clickable":!e.hasShip&&e.wasGuessed||e.hasShip&&e.wasGuessed?"unclickable":void 0:"clickable"}(e));a.dataset.col=r,a.dataset.row=o}))}))}(e.getComputerGameboard())}function o(){document.querySelectorAll(".gameboard-container").forEach((e=>e.textContent=""))}r(),document.querySelector("body").addEventListener("click",(t=>{if(t.target.classList.contains("clickable")){const n=t.target.dataset;e.playRound([parseInt(n.col),parseInt(n.row)]),o(),r(),function(){if(console.log(e.getPlayerGameboard().checkIsGameOver()),console.log(e.getComputerGameboard().checkIsGameOver()),e.getPlayerGameboard().checkIsGameOver()||e.getComputerGameboard().checkIsGameOver())return!0}()?(console.log("a"),document.querySelectorAll(".clickable").forEach((e=>{e.classList.remove("clickable"),e.classList.add("unclickable")}))):(console.log("b"),e.playRound(),o(),r())}}))}()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NEI3QndKLGlCQUFpQixTQUFVQyxJQUNuQyxHQUFJQSxFQUFHNUosT0FBT3lJLFVBQVVvQixTQUFTLGFBQWMsQ0FDM0MsTUFBTWhCLEVBQVFlLEVBQUc1SixPQUFPc0osUUFDeEJ0QyxFQUFlUSxVQUFVLENBQUNzQyxTQUFTakIsRUFBTW5FLEtBQU1vRixTQUFTakIsRUFBTTFFLE9BQzlEcUYsSUFDQVYsSUEzQlIsV0FHSSxHQUZBN0MsUUFBUUMsSUFBSWMsRUFBZWMscUJBQXFCakMsbUJBQ2hESSxRQUFRQyxJQUFJYyxFQUFlZSx1QkFBdUJsQyxtQkFDOUNtQixFQUFlYyxxQkFBcUJqQyxtQkFDcENtQixFQUFlZSx1QkFBdUJsQyxrQkFFdEMsT0FBTyxDQUlmLENBb0JZa0UsSUFDQTlELFFBQVFDLElBQUksS0FsQkZoRyxTQUFTdUosaUJBQWlCLGNBQ2xDbEIsU0FBUXFCLElBQ2RBLEVBQUduQixVQUFVbkosT0FBTyxhQUNwQnNLLEVBQUduQixVQUFVQyxJQUFJLGNBQWEsTUFvQjFCekMsUUFBUUMsSUFBSSxLQUVaYyxFQUFlUSxZQUNmZ0MsSUFDQVYsSUFFUixJQXFCUixDRWpLQWtCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zdHlsZS5jc3MiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvc3R5bGUuY3NzPzcxNjMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2Rpc3BsYXlDb250cm9sbGVyLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2dhbWVDb250cm9sbGVyLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGBib2R5IHtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XG59XG4uY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgZ2FwOiA0MHB4O1xufVxuXG4uY2xpY2thYmxlIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5nYW1lYm9hcmQtY29udGFpbmVyIHtcbiAgICB3aWR0aDogNTAwcHg7XG4gICAgaGVpZ2h0OiA1MDBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmlzcXVlO1xufVxuXG4ucm93IHtcbiAgICBmbGV4OiAxO1xuICAgIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5jb2x1bW4ge1xuICAgIGZsZXg6IDE7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogZ3JleTtcbiAgICAvKiBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgKi9cbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cblxuYCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0lBQ0ksY0FBYztJQUNkLFlBQVk7SUFDWixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQix1QkFBdUI7QUFDM0I7QUFDQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsU0FBUztBQUNiOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixhQUFhO0lBQ2IsYUFBYTtJQUNiLHNCQUFzQjtJQUN0Qix3QkFBd0I7QUFDNUI7O0FBRUE7SUFDSSxPQUFPO0lBQ1AsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLE9BQU87SUFDUCxzQkFBc0I7SUFDdEIsNkJBQTZCO0lBQzdCLGtCQUFrQjtBQUN0QlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJib2R5IHtcXG4gICAgbWFyZ2luOiAwIGF1dG87XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XFxufVxcbi5jb250YWluZXIge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgICBnYXA6IDQwcHg7XFxufVxcblxcbi5jbGlja2FibGUge1xcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcblxcbi5nYW1lYm9hcmQtY29udGFpbmVyIHtcXG4gICAgd2lkdGg6IDUwMHB4O1xcbiAgICBoZWlnaHQ6IDUwMHB4O1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBiaXNxdWU7XFxufVxcblxcbi5yb3cge1xcbiAgICBmbGV4OiAxO1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbn1cXG5cXG4uY29sdW1uIHtcXG4gICAgZmxleDogMTtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogZ3JleTtcXG4gICAgLyoganVzdGlmeS1jb250ZW50OiBjZW50ZXI7ICovXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuXFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdO1xuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRE9NID0gW107XG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRPTS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRPTVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4QnlJZGVudGlmaWVyID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdLFxuICAgICAgc3VwcG9ydHM6IGl0ZW1bNF0sXG4gICAgICBsYXllcjogaXRlbVs1XVxuICAgIH07XG4gICAgaWYgKGluZGV4QnlJZGVudGlmaWVyICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1cGRhdGVyID0gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLmJ5SW5kZXggPSBpO1xuICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKGksIDAsIHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogdXBkYXRlcixcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuZnVuY3Rpb24gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgYXBpID0gb3B0aW9ucy5kb21BUEkob3B0aW9ucyk7XG4gIGFwaS51cGRhdGUob2JqKTtcbiAgdmFyIHVwZGF0ZXIgPSBmdW5jdGlvbiB1cGRhdGVyKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXAgJiYgbmV3T2JqLnN1cHBvcnRzID09PSBvYmouc3VwcG9ydHMgJiYgbmV3T2JqLmxheWVyID09PSBvYmoubGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYXBpLnVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gdXBkYXRlcjtcbn1cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuICAgICAgaWYgKHN0eWxlc0luRE9NW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRPTVtfaW5kZXhdLnVwZGF0ZXIoKTtcbiAgICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGVFbGVtZW50KSB7XG4gIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcbiAgaWYgKG5vbmNlKSB7XG4gICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKTtcbiAgfVxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuICBjc3MgKz0gb2JqLmNzcztcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfVxuXG4gIC8vIEZvciBvbGQgSUVcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiB7XG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHt9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgIH07XG4gIH1cbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuY2xhc3MgU2hpcCB7XG4gICAgLy8gaSBuZWVkIHRvIG1ha2Ugc3VyZSBsZW5ndGggaXMgYmV0d2VlbiAxIGFuZCA0XG4gICAgY29uc3RydWN0b3IobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLmhpdHMgPSAwO1xuICAgICAgICB0aGlzLnN1bmsgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBzZXRTdW5rKCkge1xuICAgICAgICB0aGlzLnN1bmsgPSB0cnVlO1xuICAgIH1cblxuICAgIGhpdCgpIHtcbiAgICAgICAgdGhpcy5oaXRzICsrXG4gICAgfVxuXG4gICAgaXNTdW5rKCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IHRoaXMuaGl0cykgdGhpcy5zZXRTdW5rKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXNlU2hpcChsZW5ndGgpIHtcbiAgICBpZiAobGVuZ3RoIDwgMSB8fCBsZW5ndGggPiA1KSByZXR1cm4gXG4gICAgcmV0dXJuIG5ldyBTaGlwKGxlbmd0aClcbn1cblxuXG5leHBvcnQge2luaXRpYWxpc2VTaGlwLCBTaGlwfSIsImltcG9ydCB7IFNoaXAsIGluaXRpYWxpc2VTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuXG5jbGFzcyBTcGFjZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGFzU2hpcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLndhc0d1ZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5taXNzZWRIaXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zaGlwID0gbnVsbDtcbiAgICB9XG59XG5cbi8vIG5vdCBzdXJlIHdoZXJlIHRvIHB1dCB0aGlzIGJ1dCBuZWVkIHRvIGJlIGNhcmVmdWwgYWJvdXQgb3JkaW5hdGUgb3JkZXI7IGNvbCxyb3cgdnMgcm93LCBjb2xcbi8vIHVzZSBjb2wscm93IGZvciBtZXRob2QgYXJndW1lbnRzIGFuZCBwdXNoaW5nIGludG8gdmFyaWFibGVzIGxpa2UgZ3Vlc3NlZENvb3Jkc1xuLy8gdXNlIHJvdywgY29sIGZvciBnYW1lYm9hcmQgbG9naWNcbmNsYXNzIEdhbWVib2FyZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUdyaWQoKSB7XG4gICAgICAgICAgICBsZXQgbmV3R3JpZCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGk8MTA7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCByb3cgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgajwxMDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNxdWFyZSA9IG5ldyBTcGFjZSgpO1xuICAgICAgICAgICAgICAgICAgICByb3cucHVzaChzcXVhcmUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld0dyaWQucHVzaChyb3cpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3R3JpZFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ3JpZCA9IGNyZWF0ZUdyaWQoKTtcbiAgICAgICAgdGhpcy5hbGxTaGlwQ29vcmRzID0gW107XG4gICAgICAgIHRoaXMuZ3Vlc3NlZENvb3JkcyA9IFtdO1xuICAgIH1cblxuICAgIGlzT3V0T2ZCb3VuZHMoY29sLCByb3cpIHtcbiAgICAgICAgaWYgKGNvbCA+IDkgfHwgcm93ID4gOSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjaGVja0lmQWxyZWFkeVBsYWNlZChjb2wsIHJvdykge1xuICAgICAgICBpZiAodGhpcy5ncmlkW3Jvd11bY29sXS5oYXNTaGlwID09PSB0cnVlKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHBvcHVsYXRlU2hpcENvb3Jkc0FycmF5KGNvbCwgcm93KSB7XG4gICAgICAgIHRoaXMuYWxsU2hpcENvb3Jkcy5wdXNoKFtjb2wsIHJvd10pXG4gICAgfVxuXG4gICAgcGxhY2VTaGlwKGxlbmd0aCwgb3JpZW50YXRpb24sIFtzdGFydENvbCwgc3RhcnRSb3ddKSB7XG5cbiAgICAgICAgLy8gdGVzdCBpZiBzdGFydCBjb29yZCBpcyBvdXQgb2YgYm91bmRzXG4gICAgICAgIGlmICh0aGlzLmlzT3V0T2ZCb3VuZHMoc3RhcnRDb2wsIHN0YXJ0Um93KSkgcmV0dXJuICdvdXQgb2YgYm91bmRzJztcblxuICAgICAgICBsZXQgbmV3U2hpcCA9IGluaXRpYWxpc2VTaGlwKGxlbmd0aCk7XG4gICAgICAgIGlmICghbmV3U2hpcCkgcmV0dXJuO1xuXG4gICAgICAgIHN3aXRjaChvcmllbnRhdGlvbikge1xuICAgICAgICAgICAgLy8gaWYgb3JpZW50YXRpb24gaXMgaG9yaXpvbnRhbFxuICAgICAgICAgICAgLy8gc3R1ZmYgaGFwcGVucyBmcm9tIGxlZnQgdG8gcmlnaHRcbiAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgIC8vbG9vcCBmb3IgbGVuZ3RoIGFuZCBjaGVjayBpZiBvdXQgb2YgYm91bmRzIG9yIGFscmVhZHkgb2NjdXBpZWQ7IGlmIHNvIGNhbmNlbCBleGVjdXRpb25cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaTwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPdXRPZkJvdW5kcyhzdGFydFJvdywgc3RhcnRDb2wgKyBpKSkgcmV0dXJuICdvdXQgb2YgYm91bmRzJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tJZkFscmVhZHlQbGFjZWQoc3RhcnRSb3csIHN0YXJ0Q29sICsgaSkpIHJldHVybiAncG9zaXRpb24gYWxyZWFkeSBvY2N1cGllZCc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZWxzZSwgbG9vcCBhbG9uZyB0aGUgcm93IChvY2N1cHkgY29sdW1ucyBvZiB0aGUgc2FtZSByb3cpXG4gICAgICAgICAgICAgICAgLy8gYXQgZWFjaCBncmlkIHNxdWFyZSwgb2NjdXB5IHdpdGggc2hpcCBJRFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFtzdGFydFJvd11bc3RhcnRDb2wgKyBpXS5oYXNTaGlwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAvLyB0aGlzIG1heSBiZSBub3QgZ29vZFxuICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFtzdGFydFJvd11bc3RhcnRDb2wgKyBpXS5zaGlwID0gbmV3U2hpcDtcblxuICAgICAgICAgICAgICAgICAgIC8vIG1heSBiZSBhbiBlcnJvciBpbiB0aGUgY29sIGFuZCByb3cgYXJndW1lbnQgb3JkZXJcbiAgICAgICAgICAgICAgICAgICAvL25vdCB1bmRlcnN0YW5kLi4uXG4gICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoaXMgZnJvbSBzcGFjZXMsIHRvIGNvb3JkaW5hdGVzLCBjdXMgaSBkb24ndCB3YW50IGEgY29weSBvZiBvYmplY3RzXG4gICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVNoaXBDb29yZHNBcnJheShzdGFydENvbCArIGksIHN0YXJ0Um93KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAvLyBpZiBvcmllbnRhdGlvbiBpcyB2ZXJ0aWNhbFxuICAgICAgICAgICAgLy8gc2hpcCBpcyBjcmVhdGVkIGZyb20gYm90dG9tIHRvIHRvcFxuICAgICAgICAgICAgLy8gcm93WzBdIGlzIGJvdHRvbSwgcm93WzldIHRvIHRvcCwgZHVlIHRvIHRoZSBgOSAtIGBcbiAgICAgICAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaTwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPdXRPZkJvdW5kcyhzdGFydFJvdyArIGksIHN0YXJ0Q29sKSkgcmV0dXJuICdvdXQgb2YgYm91bmRzJ1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0lmQWxyZWFkeVBsYWNlZChzdGFydFJvdyArIGksIHN0YXJ0Q29sKSkgcmV0dXJuICdwb3NpdGlvbiBhbHJlYWR5IG9jY3VwaWVkJ1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFuZCB0aGVuIHB1dCBzdHVmZiBhbG9uZyB0aGUgY29sdW1uIChvY2N1cHkgcm93cyBvZiB0aGUgc2FtZSBjb2x1bW4pXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGk8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFtzdGFydFJvdyArIGldW3N0YXJ0Q29sXS5oYXNTaGlwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncmlkW3N0YXJ0Um93ICsgaV1bc3RhcnRDb2xdLnNoaXAgPSBuZXdTaGlwO1xuXG4gICAgICAgICAgICAgICAgICAgLy8gbWF5IGJlIGFuIGVycm9yIGluIHRoZSBjb2wgYW5kIHJvdyBhcmd1bWVudCBvcmRlclxuICAgICAgICAgICAgICAgICAgIC8vIGNoYW5nZSB0aGlzIGZyb20gc3BhY2VzLCB0byBjb29yZGluYXRlcywgY3VzIGkgZG9uJ3Qgd2FudCBhIGNvcHkgb2Ygb2JqZWN0c1xuICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVTaGlwQ29vcmRzQXJyYXkoc3RhcnRDb2wsIHN0YXJ0Um93ICsgaSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdoYXQgZG8gaSBwbGFjZSBvbiB0aGUgYm9hcmQ/XG4gICAgLy8gNSBwaWVjZXMgaSB0aGlua1xuICAgIC8vIGhtbSBob3cgZG8gaSBrZWVwIHRyeWluZyB0byBwbGFjZSB0aGUgc2hpcHMgaWYgdGhleSBhcmUgb3V0IG9mIGJvdW5kcyBvciBhbHJlYWR5IHBhbGNlZD9cbiAgICAvLyBzaG91bGQgaSBqdXN0IHB1dCBlYWNoIGluIGEgd2hpbGUgbG9vcD8gb3IgdXNlIHJlY3Vyc2lvbj9cblxuICAgIHBsYWNlQWxsU2hpcHNPbkJvYXJkKCkge1xuICAgICAgICAvLyBuZWVkIHRvIHB1dCBzaGlwcyBob3Jpem9udGFsbHkgb3IgdmVydGljYWxseSByYW5kb21seVxuICAgICAgICAvLyB0aGlzIHdpbGwgb25seSBnZW5lcmF0ZSBvbmUgb3JpZW50YXRpb24uLi4gbWFrZSBpdCBhIHNlcGFyYXRlIGZ1bmN0aW9uXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tT3JpZW50YXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gWydob3Jpem9udGFsJywgJ3ZlcnRpY2FsJ10uTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlcygpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbUNvbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgICAgICAgY29uc3QgcmFuZG9tUm93ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICAgICAgICByZXR1cm4gW3JhbmRvbUNvbCwgcmFuZG9tUm93XVxuICAgICAgICB9XG5cblxuICAgICAgICAvL2hvdyBkbyBpIHByZXZlbnQgZmFpbHVyZSB0byBwbGFjZSBhIHNoaXA/IGlzIGl0IFxuICAgICAgICAvLyB0aGVyZSBhcmUgc2V2ZXJhbCBvcHRpb25zLi4uIFxuICAgICAgICAvLyB3aGlsZSAoKSB7fVxuICAgICAgICB0aGlzLnBsYWNlU2hpcCg1LCBnZW5lcmF0ZVJhbmRvbU9yaWVudGF0aW9uKCksIGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZXMoKSlcblxuICAgIH1cblxuICAgIGdldFBvc2l0aW9uKGNvbCwgcm93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyaWRbcm93XVtjb2xdXG4gICAgfVxuXG4gICAgY2hlY2tTaGlwRXhpc3RzKGNvbCwgcm93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyaWRbcm93XVtjb2xdLmhhc1NoaXBcbiAgICB9XG5cblxuICAgIGdldFNoaXAoY29sLCByb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZFtyb3ddW2NvbF0uc2hpcFxuICAgIH1cblxuICAgIGNoZWNrTWlzc2VkSGl0KGNvbCwgcm93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyaWRbcm93XVtjb2xdLm1pc3NlZEhpdFxuICAgIH1cblxuICAgIGNoZWNrV2FzR3Vlc3NlZChjb2wsIHJvdykge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmlkW3Jvd11bY29sXS53YXNHdWVzc2VkXG4gICAgfVxuXG4gICAgLy8gY29tcGFyZSBzdHJpbmdpZmllZCBzaGlwIGNvb3JkcyB0byB0aGUgZ3Vlc3NlZCBjb29yZHMsIGFuZCByZXR1cm4gdHJ1ZSBpZiBhbGwgc2hpcCBjb29yZHMgYXJlIGd1ZXNzZWQuXG4gICAgY2hlY2tJc0dhbWVPdmVyKCkge1xuICAgICAgICBsZXQgY29udmVydGVkQWxsU2hpcENvb3JkcyA9IHRoaXMuYWxsU2hpcENvb3Jkcy5tYXAoY29vcmQgPT4gSlNPTi5zdHJpbmdpZnkoY29vcmQpKVxuICAgICAgICBsZXQgY29udmVydGVkR3Vlc3NlZENvb3JkcyA9IHRoaXMuZ3Vlc3NlZENvb3Jkcy5tYXAoY29vcmQgPT5KU09OLnN0cmluZ2lmeShjb29yZCkpXG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnZlcnRlZEFsbFNoaXBDb29yZHMpXG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnZlcnRlZEd1ZXNzZWRDb29yZHMpXG4gICAgICAgIC8vIGlmIChjb252ZXJ0ZWRBbGxTaGlwQ29vcmRzLmV2ZXJ5KHNoaXBDb29yZCA9PiBjb252ZXJ0ZWRHdWVzc2VkQ29vcmRzLmluY2x1ZGVzKHNoaXBDb29yZCkpKSB7XG4gICAgICAgIC8vICAgICB0aGlzLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAvLyB9XG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnZlcnRlZEFsbFNoaXBDb29yZHMuZXZlcnkoc2hpcENvb3JkID0+IGNvbnZlcnRlZEd1ZXNzZWRDb29yZHMuaW5jbHVkZXMoc2hpcENvb3JkKSkpXG4gICAgICAgIHJldHVybiBjb252ZXJ0ZWRBbGxTaGlwQ29vcmRzLmV2ZXJ5KHNoaXBDb29yZCA9PiBjb252ZXJ0ZWRHdWVzc2VkQ29vcmRzLmluY2x1ZGVzKHNoaXBDb29yZCkpXG4gICAgfVxuXG4gICAgcmVjZWl2ZUF0dGFjayhjb2wsIHJvdykge1xuICAgICAgICAvLyBmaXJzdCwgY2hlY2sgaWYgcG9zaXRpb24gaXMgYWxyZWFkeSBndWVzc2VkXG4gICAgICAgIGlmICh0aGlzLmNoZWNrV2FzR3Vlc3NlZChjb2wsIHJvdykpIHJldHVybiAnYWxyZWFkeSBhdHRhY2tlZCc7XG4gICAgICAgIC8vIGlmIG5vdCBndWVzc2VkLCB0aGVuIG1hcmsgYXMgZ3Vlc3NlZFxuICAgICAgICB0aGlzLmdldFBvc2l0aW9uKGNvbCwgcm93KS53YXNHdWVzc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ndWVzc2VkQ29vcmRzLnB1c2goW2NvbCwgcm93XSlcblxuICAgICAgICAvLyBpZiBub3QsIGNoZWNrIGlmIHRoZXJlIGlzIGEgc2hpcCB0aGVyZVxuICAgICAgICBpZiAodGhpcy5jaGVja1NoaXBFeGlzdHMoY29sLCByb3cpKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcywgdGhlbiBpZGVudGlmeSB0aGUgc2hpcFxuICAgICAgICAgICAgLy8gdGhlbiBoaXQgdGhlIHNoaXBcbiAgICAgICAgICAgIHRoaXMuZ2V0U2hpcChjb2wsIHJvdykuaGl0KClcbiAgICAgICAgICAgIC8vIHRoZW4gY2hlY2sgaWYgc2hpcCBpcyBzdW5rXG4gICAgICAgICAgICB0aGlzLmdldFNoaXAoY29sLCByb3cpLmlzU3VuaygpO1xuXG4gICAgICAgICAgICAvLyB0aGVuIGNoZWNrIGlmIGFsbCBzaGlwcyBhcmUgaGl0LCBieSBjb21wYXJpbmcgYWxsU2hpcENvb3JkcyBhbmQgZ3Vlc3NlZENvb3JkcyBhcnJheXMgXG4gICAgICAgICAgICAvLyB0aGlzLmNoZWNrSXNHYW1lT3ZlcigpO1xuXG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlcmUgaXNuJ3QgYSBzaGlwLCB0aGVuIG1hcmsgdGhlIHBsYWNlIHdpdGggbWlzc2VkSGl0XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nZXRQb3NpdGlvbihjb2wsIHJvdykubWlzc2VkSGl0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFxufVxuZXhwb3J0IHtHYW1lYm9hcmR9IiwiZXhwb3J0IGNsYXNzIFBsYXllciB7XG4gICAgY29uc3RydWN0b3IoY29tcHV0ZXIpIHtcbiAgICB9XG5cbiAgICAvLyBobW0gaXMgdGhpcyBva2F5PyBkbyBpIG5lZWQgdG8gaW1wb3J0IGdhbWVib2FyZD8gc3VyZWx5IG5vdC4uLiB0aGF0IHdvdWxkIGJlIGF3ZnVsXG4gICAgLy8gaSBqdXN0IGNhbGxlZCB0aGUgcmVjZWl2ZUF0dGFjayBtZXRob2Qgb24gdGhlIGdhbWVib2FyZCBhcmd1bWVudC4uLiBpcyB0aGlzIGEgYmFkIHRoaW5nP1xuICAgIGF0dGFjayhnYW1lYm9hcmQsIFtjb2wsIHJvd10pIHtcbiAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCByb3cpXG4gICAgfVxuXG4gICAgLy8gYWN0dWFsbHkgdGhpcyBjYW4ndCBiZSBpbiBoZXJlLi4uIGN1cyB0aGUgY29sIGFuZCByb3cgZG9uJ3QgY2hhbmdlLi4uIHRoZXkgZ290dGEgY2hhbmdlXG4gICAgLy8gdHJ5QXR0YWNrVW50aWxTdWNjZXNzKGdhbWVib2FyZCwgW2NvbCwgcm93XSkge1xuICAgIC8vICAgICBsZXQgaW5pdGlhbEd1ZXNzZXMgPSBKU09OLnN0cmluZ2lmeShnYW1lYm9hcmQuZ3Vlc3NlZENvb3JkcylcbiAgICAvLyAgICAgbGV0IGN1cnJlbnRHdWVzc2VzO1xuICAgIC8vICAgICB3aGlsZSAoaW5pdGlhbEd1ZXNzZXMgIT09IGN1cnJlbnRHdWVzc2VzKSB7XG4gICAgLy8gICAgICAgICB0aGlzLmF0dGFjayhnYW1lYm9hcmQsIFtjb2wsIHJvd10pXG4gICAgLy8gICAgICAgICBjdXJyZW50R3Vlc3NlcyA9IEpTT04uc3RyaW5naWZ5KGdhbWVib2FyZC5ndWVzc2VkQ29vcmRzKVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxufVxuXG4vLyBhaGhoIGRvbid0IHRoaW5rIHRoaXMgd29ya3MsLCwgZ290dGEgdXNlIHN1cGVyP1xuZXhwb3J0IGNsYXNzIENvbXB1dGVyIGV4dGVuZHMgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKVxuICAgIH1cblxuICAgIHJhbmRvbUF0dGFjayhnYW1lYm9hcmQpIHtcbiAgICAgICAgLy8gdGFrZSByYW5kb20gbnVtYmVycyBmb3IgY29sdW1uIGFuZCByb3dcbiAgICAgICAgY29uc3QgcmFuZG9tQ29sID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICAgIGNvbnN0IHJhbmRvbVJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuXG4gICAgICAgIC8vdGhlbiBjaGVjayBpZiBoYXMgYmVlbiBhdHRhY2tlZCxcbiAgICAgICAgaWYoZ2FtZWJvYXJkLmNoZWNrV2FzR3Vlc3NlZChyYW5kb21Db2wsIHJhbmRvbVJvdykpIHJldHVyblxuXG4gICAgICAgIC8vdGhlbiBjYWxsIGF0dGFja1xuICAgICAgICB0aGlzLmF0dGFjayhnYW1lYm9hcmQsIFtyYW5kb21Db2wsIHJhbmRvbVJvd10pXG4gICAgfVxufSIsIlxuaW1wb3J0IHsgbWFrZUdhbWVDb250cm9sbGVyIH0gZnJvbSBcIi4vZ2FtZUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuXG4vLyBpIGFtIGdvbm5hIHB1dCBnYW1lQ29udHJvbGxlciBpbiBkaXNwbGF5Q09udHJvbGxlcjtcbi8vIHdpbGwgbmVlZCBwbGF5Um91bmQgZnVuY3Rpb24gaW4gdGhlIGV2ZW50TGlzdGVuZXJcbmZ1bmN0aW9uIG1ha2VEaXNwbGF5Q29udHJvbGxlcigpIHtcblxuICAgIGxldCBnYW1lQ29udHJvbGxlciA9IG1ha2VHYW1lQ29udHJvbGxlcigpO1xuICAgIGZ1bmN0aW9uIHBvcHVsYXRlRWxlbWVudEluZm8oZGl2VHlwZSwgIHRleHQ9bnVsbCwgcGFyZW50PW51bGwsIC4uLmNsYXNzZXMpIHtcbiAgICAgICAgY29uc3QgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGl2VHlwZSk7XG4gICAgICAgIGNsYXNzZXMuZm9yRWFjaCgoY2xhc3NOYW1lKSA9PiBuZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSk7XG4gICAgICAgIC8vIG1heWJlIHNwYWNlcyBuZWVkIGFub3RoZXIgY2xhc3MgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgc2hvdWxkIGJlIGNsaWNrZWQgb3Igbm90XG4gICAgICAgIGlmICh0ZXh0KSBuZXdFbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgaWYgKHBhcmVudCkgcGFyZW50LmFwcGVuZENoaWxkKG5ld0VsZW1lbnQpXG4gICAgICAgIHJldHVybiBuZXdFbGVtZW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRldGVybWluZVRleHQoc3BhY2UpIHtcbiAgICAgICAgaWYgKCFzcGFjZS5oYXNTaGlwICYmICFzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJy4nXG4gICAgICAgIGlmIChzcGFjZS5oYXNTaGlwICYmICFzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJ28nXG4gICAgICAgIGlmICghc3BhY2UuaGFzU2hpcCAmJiBzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJ20nXG4gICAgICAgIGlmIChzcGFjZS5oYXNTaGlwICYmIHNwYWNlLndhc0d1ZXNzZWQpIHJldHVybiAnWCdcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZXRlcm1pbmVDZWxsU3R5bGUoc3BhY2UpIHtcbiAgICAgICAgaWYgKCFzcGFjZS5oYXNTaGlwICYmICFzcGFjZS53YXNHdWVzc2VkKSByZXR1cm4gJ2NsaWNrYWJsZSdcbiAgICAgICAgaWYgKHNwYWNlLmhhc1NoaXAgJiYgIXNwYWNlLndhc0d1ZXNzZWQpIHJldHVybiAnY2xpY2thYmxlJ1xuICAgICAgICBpZiAoIXNwYWNlLmhhc1NoaXAgJiYgc3BhY2Uud2FzR3Vlc3NlZCkgcmV0dXJuICd1bmNsaWNrYWJsZSdcbiAgICAgICAgaWYgKHNwYWNlLmhhc1NoaXAgJiYgc3BhY2Uud2FzR3Vlc3NlZCkgcmV0dXJuICd1bmNsaWNrYWJsZSdcbiAgICB9XG5cbiAgICAvLyBhbHNvLCBtYWtlIGRpdnMgY2xpY2thYmxlIGluIGNzcy4gZG9uJ3QgYWxsb3cgY2xpY2tzIG9uIGFscmVhZHkgY2xpY2tlZC5cbiAgICAvLyBtYWtlIG9ubHkgdGhlIGxlZnQgZ2FtZWJvYXJkIGNsaWNrYWJsZVxuXG4gICAgLy8gbWF5YmUgc2V0IHRpbWVvdXQgZm9yIGVuZW15Li4uIHdhaXQgYSBiaXRcbiAgICBmdW5jdGlvbiBkaXNwbGF5UGxheWVyR2FtZWJvYXJkKGdhbWVib2FyZCkge1xuICAgICAgICBsZXQgZ2FtZWJvYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVib2FyZC1jb250YWluZXIucmlnaHQnKVxuICAgICAgICBnYW1lYm9hcmQuZ3JpZC5tYXAoKHJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCByb3dFbGVtZW50ID0gcG9wdWxhdGVFbGVtZW50SW5mbygnZGl2JywgbnVsbCwgZ2FtZWJvYXJkQ29udGFpbmVyLCAncm93Jyk7XG4gICAgICAgICAgICByb3cubWFwKChzcGFjZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVsYXRlRWxlbWVudEluZm8oJ2RpdicsIGRldGVybWluZVRleHQoc3BhY2UpLCByb3dFbGVtZW50LCAnY29sdW1uJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gbWFrZSBlbmVteSAoY29tcHV0ZXIpIGdhbWVib2FyZCBjbGlja2FibGVcbiAgICBmdW5jdGlvbiBkaXNwbGF5Q29tcHV0ZXJHYW1lYm9hcmQoZ2FtZWJvYXJkKSB7XG4gICAgICAgIGxldCBnYW1lYm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkLWNvbnRhaW5lci5sZWZ0JylcbiAgICAgICAgZ2FtZWJvYXJkLmdyaWQubWFwKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgICBsZXQgcm93RWxlbWVudCA9IHBvcHVsYXRlRWxlbWVudEluZm8oJ2RpdicsIG51bGwsIGdhbWVib2FyZENvbnRhaW5lciwgJ3JvdycpO1xuICAgICAgICAgICAgcm93Lm1hcCgoc3BhY2UsIGNvbEluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNwYWNlRWxlbWVudCA9IHBvcHVsYXRlRWxlbWVudEluZm8oJ2RpdicsIGRldGVybWluZVRleHQoc3BhY2UpLCByb3dFbGVtZW50LCAnY29sdW1uJywgIGRldGVybWluZUNlbGxTdHlsZShzcGFjZSkgKVxuICAgICAgICAgICAgICAgIHNwYWNlRWxlbWVudC5kYXRhc2V0LmNvbCA9IGNvbEluZGV4O1xuICAgICAgICAgICAgICAgIHNwYWNlRWxlbWVudC5kYXRhc2V0LnJvdyA9IHJvd0luZGV4O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5Qm90aEdhbWVib2FyZHMoKSB7XG4gICAgICAgIGRpc3BsYXlQbGF5ZXJHYW1lYm9hcmQoZ2FtZUNvbnRyb2xsZXIuZ2V0UGxheWVyR2FtZWJvYXJkKCkpXG4gICAgICAgIGRpc3BsYXlDb21wdXRlckdhbWVib2FyZChnYW1lQ29udHJvbGxlci5nZXRDb21wdXRlckdhbWVib2FyZCgpKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUJvdGhHYW1lQm9hcmRzKCkge1xuICAgICAgICBsZXQgZ2FtZWJvYXJkQ29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYW1lYm9hcmQtY29udGFpbmVyJylcbiAgICAgICAgZ2FtZWJvYXJkQ29udGFpbmVycy5mb3JFYWNoKGNvbnRhaW5lciA9PiBjb250YWluZXIudGV4dENvbnRlbnQgPSBcIlwiKVxuICAgIH1cblxuICAgIC8vIGRvIGkgcHV0IGNsaWNrZXZlbnRsaXN0ZW5lcnMgaW4gZGlzcGxheUNvbnRyb2xsZXIsIG9yIGdhbWVDb250cm9sbGVyP1xuICAgIC8vIG9yIHNob3VsZCBpIHB1dCBnYW1lQ29udHJvbGxlciBpbiBkaXNwbGF5Q29udHJvbGxlcj9cblxuICAgIC8vIGZvciBzb21lIHJlYXNvbiwgaXQgbWFkZSBzZW5zZSB0byBwdXQgZGlzcGxheUJvYXJkIGluIGdhbWVDb250cm9sbGVyXG4gICAgLy8gYnV0IHdvdWxkIGl0IG1ha2Ugc2Vuc2UgdG8gcHV0IHBsYXlSb3VuZCBpbiBkaXNwbGF5Q29udHJvbGxlcj9cblxuICAgIC8vIG1tIHNvIFVJIG5lZWRzIHRvIGFjY2VzcyB0aGUgcGxheVJvdW5kIGZ1bmN0aW9uXG5cbiAgICAvLyBzbyBtYXliZSwgZ2FtZUNvbnRyb2xsZXIucGxheVJvdW5kKClcblxuICAgIGZ1bmN0aW9uIGdldENsaWNrYWJsZXMoKSB7XG5cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUnKVxuICAgIH1cblxuICAgIC8vIHRoZSBnYW1lIGxvb3AgaXMgaGVyZVxuXG4gICAgLy8gd291bGQgaSBuZWVkIHRvIGNvbnNpZGVyIGEgZnV0dXJlIDIgcGxheWVyIHZlcnNpb24/XG5cbiAgICBkaXNwbGF5Qm90aEdhbWVib2FyZHMoKTtcbiAgICAvLyBidXQgdGhlc2UgbmVlZCBwbGF5ZXJHYW1lYm9hcmQgYW5kIGNvbXB1dGVyR2FtZWJvYXJkLi4uIFxuICAgIC8vIGZpZ3VyZSBpdCBvdXQgZnJvbSB0aWMgdGFjIHRvZS4uLlxuICAgIC8vIGZvciBlYWNoIG9mIHRoZXNlIHNwYWNlc1xuICAgIC8vIGlmIGNsaWNrZWQsIHRoZW4gcGxheSBhIHJvdW5kXG4gICAgLy8gdGhpcyBtZWFucyB1c2luZyBhdHRhY2ssIHVzaW5nIHRoZSBjb29yZGluYXRlcy4uLiBpIHBvc3NpYmx5IG5lZWQgdG8gYWRkIGRhdGEuY29sIGFuZCBkYXRhLnJvdy4uLiBva2F5XG5cbiAgICAvLyBjbGljayBldmVudFxuICAgIGxldCBib2R5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxuXG4gICAgLy8gbm93LCBpIG5lZWQgdG8gZW5kIHRoZSBnYW1lLi4uIFxuICAgIC8vIG1heWJlIGRpc2FibGUgYWxsPyB0dXJuIGFsbCBjbGlja2FibGVzIGludG8gdW5jbGlja2FibGVcblxuICAgIC8vIGNoZWNrIHdoYXQgdGhpcyBkb2VzXG4gICAgZnVuY3Rpb24gY2hlY2tJZkdhbWVPdmVyKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhnYW1lQ29udHJvbGxlci5nZXRQbGF5ZXJHYW1lYm9hcmQoKS5jaGVja0lzR2FtZU92ZXIoKSlcbiAgICAgICAgY29uc29sZS5sb2coZ2FtZUNvbnRyb2xsZXIuZ2V0Q29tcHV0ZXJHYW1lYm9hcmQoKS5jaGVja0lzR2FtZU92ZXIoKSlcbiAgICAgICAgaWYgKGdhbWVDb250cm9sbGVyLmdldFBsYXllckdhbWVib2FyZCgpLmNoZWNrSXNHYW1lT3ZlcigpIHx8XG4gICAgICAgICAgICBnYW1lQ29udHJvbGxlci5nZXRDb21wdXRlckdhbWVib2FyZCgpLmNoZWNrSXNHYW1lT3ZlcigpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuXG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRHYW1lT3ZlcigpIHtcbiAgICAgICAgY29uc3QgZW5lbXlHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNsaWNrYWJsZScpXG4gICAgICAgIGVuZW15R3JpZC5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2NsaWNrYWJsZScpXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCd1bmNsaWNrYWJsZScpXG4gICAgICAgIH0pXG5cbiAgICB9XG5cblxuICAgIGJvZHlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGVsKSA9PiB7XG4gICAgICAgIGlmIChlbC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbGlja2FibGUnKSkge1xuICAgICAgICAgICAgY29uc3Qgc3BhY2UgPSBlbC50YXJnZXQuZGF0YXNldDtcbiAgICAgICAgICAgIGdhbWVDb250cm9sbGVyLnBsYXlSb3VuZChbcGFyc2VJbnQoc3BhY2UuY29sKSwgcGFyc2VJbnQoc3BhY2Uucm93KV0pXG4gICAgICAgICAgICByZW1vdmVCb3RoR2FtZUJvYXJkcygpO1xuICAgICAgICAgICAgZGlzcGxheUJvdGhHYW1lYm9hcmRzKCk7XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIHdoYXQgdGhpcyBmdW5jdGlvbiBpcyBkb2luZ1xuICAgICAgICAgICAgaWYgKGNoZWNrSWZHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2EnKVxuICAgICAgICAgICAgICAgIHNldEdhbWVPdmVyKClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2InKVxuICAgICAgICAgICAgICAgIC8vIGkgZGVmaW5pdGVseSBuZWVkIHRvIGRvIHRyeUF0dGFja1VudGlsU3VjY2VzcyBmb3IgY29tcHV0ZXIuLi5cbiAgICAgICAgICAgICAgICBnYW1lQ29udHJvbGxlci5wbGF5Um91bmQoKTtcbiAgICAgICAgICAgICAgICByZW1vdmVCb3RoR2FtZUJvYXJkcygpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXlCb3RoR2FtZWJvYXJkcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiAgICAvLyBjb25zb2xlLmxvZyhnZXRDbGlja2FibGVzKCkpXG5cbiAgICAvLyBnZXRDbGlja2FibGVzKCkuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIFxuICAgIC8vICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgIC8vICAgICAgICAgZWwuZGF0YXNldC5jb2wsIGVsLmRhdGFzZXQucm93XG4gICAgLy8gICAgICAgICApXG4gICAgICAgICAgICAvLyBpIGNhbiBzZWUgdGhhdCBpIG5lZWQgdG8gY2hhbmdlIHBsYXlSb3VuZCwgc28gdGhhdCBpdCB0YWtlcyBzdHJpbmdcbiAgICAgICAgICAgIC8vIHdpbGwgbmVlZCB0byBhZGp1c3QgZm9yIHRoZSBjb21wdXRlci4uLiBhZGp1c3QgaXQ/XG4gICAgICAgICAgICAvLyBnYW1lQ29udHJvbGxlci5wbGF5Um91bmQoW2VsLmRhdGFzZXQuY29sLCBlbC5kYXRhc2V0LnJvd10pXG4gICAgICAgICAgICAvLyByZW1vdmVCb3RoR2FtZUJvYXJkcygpO1xuICAgICAgICAgICAgLy8gZGlzcGxheUJvdGhHYW1lYm9hcmRzKCk7XG4gICAgICAgICAgICAvLyBnYW1lQ29udHJvbGxlci5wbGF5Um91bmQoKTtcbiAgICAgICAgICAgIC8vIHJlbW92ZUJvdGhHYW1lQm9hcmRzKCk7XG4gICAgICAgICAgICAvLyBkaXNwbGF5Qm90aEdhbWVib2FyZHMoKTtcbiAgICAvLyAgICAgfSlcbiAgICAvLyB9KVxuICAgIFxufVxuXG5cblxuZXhwb3J0IHtcbiAgICAvLyBkaXNwbGF5UGxheWVyR2FtZWJvYXJkLFxuICAgIC8vIGRpc3BsYXlDb21wdXRlckdhbWVib2FyZCxcbiAgICBtYWtlRGlzcGxheUNvbnRyb2xsZXIsXG59IiwiaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBQbGF5ZXIsIENvbXB1dGVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG4vLyBpbXBvcnQgeyBkaXNwbGF5UGxheWVyR2FtZWJvYXJkLCBkaXNwbGF5Q29tcHV0ZXJHYW1lYm9hcmR9IGZyb20gXCIuL2Rpc3BsYXlDb250cm9sbGVyXCI7XG5cbi8vIGkgbmVlZCB0byBjaGFuZ2UgdGhpcyBhIGxpdHRsZVxuLy8gbmVlZCB0byBkaXNwbGF5IGJvdGggZ2FtZWJvYXJkcy4uLlxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VHYW1lQ29udHJvbGxlcigpIHtcbiAgICAvLyBhdCBzb21lIHBvaW50LCB3aWxsIG5lZWQgdG8gZGV2ZWxvcCBmdW5jdGlvbiB0byBwbGFjZUFsbFNoaXBzLCB3aGljaCBcblxuICAgIGxldCBwbGF5ZXJHYW1lYm9hcmQgPSBuZXcgR2FtZWJvYXJkKCk7XG4gICAgbGV0IGNvbXB1dGVyR2FtZWJvYXJkID0gbmV3IEdhbWVib2FyZCgpO1xuXG4gICAgY29uc3QgZ2V0UGxheWVyR2FtZWJvYXJkID0gKCkgPT4gcGxheWVyR2FtZWJvYXJkXG4gICAgY29uc3QgZ2V0Q29tcHV0ZXJHYW1lYm9hcmQgPSAoKSA9PiBjb21wdXRlckdhbWVib2FyZFxuXG4gICAgY29uc3QgcGxheWVyID0gbmV3IFBsYXllcigpO1xuICAgIGNvbnN0IGNvbXB1dGVyID0gbmV3IENvbXB1dGVyKCk7XG5cbiAgICBsZXQgY3VycmVudFBsYXllciA9IHBsYXllcjtcbiAgICBsZXQgZW5lbXlHYW1lYm9hcmQgPSBjb21wdXRlckdhbWVib2FyZFxuXG4gICAgbGV0IGlzR2FtZU92ZXIgPSBmYWxzZTtcblxuICAgIGNvbnN0IGdldEVuZW15R2FtZWJvYXJkID0gKCkgPT4gZW5lbXlHYW1lYm9hcmQoKVxuXG4gICAgLy8gd2FpdCwgaXMgdGhpcyBtb2NraW5nPyBpdCBtYXkgYmUgd29ydGggYSByZWFkIGFnYWluLi4uXG4gICAgLy8gcGxheWVyR2FtZWJvYXJkLnBsYWNlU2hpcCg1LCAndmVydGljYWwnLCBbOSw2XSk7XG4gICAgLy8gcGxheWVyR2FtZWJvYXJkLnBsYWNlU2hpcCg0LCAnaG9yaXpvbnRhbCcsIFswLDhdKTtcbiAgICAvLyBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKDMsICd2ZXJ0aWNhbCcsIFs1LDZdKTtcbiAgICAvLyBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKDMsICdob3Jpem9udGFsJywgWzIsM10pO1xuICAgIHBsYXllckdhbWVib2FyZC5wbGFjZVNoaXAoMiwgJ3ZlcnRpY2FsJywgWzEsMl0pO1xuXG4gICAgLy8gY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKDUsICd2ZXJ0aWNhbCcsIFs5LDNdKTtcbiAgICAvLyBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoNCwgJ2hvcml6b250YWwnLCBbMCw4XSk7XG4gICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKDMsICd2ZXJ0aWNhbCcsIFs1LDZdKTtcbiAgICAvLyBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoMywgJ2hvcml6b250YWwnLCBbMiwzXSk7XG4gICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKDIsICd2ZXJ0aWNhbCcsIFsxLDJdKTtcblxuICAgIC8vIG1heWJlIGkgbmVlZCB0byBjaGFuZ2UgdGhpcz8gbWF5YmUgbm90IVxuICAgIGZ1bmN0aW9uIHN3YXBQbGF5ZXJBbmRFbmVteSgpIHtcbiAgICAgICAgY3VycmVudFBsYXllciA9PT0gcGxheWVyID8gY3VycmVudFBsYXllciA9IGNvbXB1dGVyIDogY3VycmVudFBsYXllciA9IHBsYXllcjtcbiAgICAgICAgZW5lbXlHYW1lYm9hcmQgPT09IHBsYXllckdhbWVib2FyZCA/IGVuZW15R2FtZWJvYXJkID0gY29tcHV0ZXJHYW1lYm9hcmQgOiBlbmVteUdhbWVib2FyZCA9IHBsYXllckdhbWVib2FyZDtcbiAgICB9XG5cbiAgICAvLyBpZiBnYW1lIGlzIG92ZXIsIHNldCB0aGUgaXNHYW1lT3ZlciB2YXJpYWJsZSB0byB0cnVlIHRvIGVuZCB0aGUgd2hpbGUgbG9vcC5cbiAgICBmdW5jdGlvbiBjaGVja0lzR2FtZU92ZXIoZ2FtZWJvYXJkKSB7XG4gICAgICAgIGlmIChnYW1lYm9hcmQuY2hlY2tJc0dhbWVPdmVyKCkpIGlzR2FtZU92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB2aXN1YWxpc2VHYW1lYm9hcmQoZ2FtZWJvYXJkKSB7XG4gICAgICAgIC8vIGhvdyBkbyBpIGNvbnZlcnQgdGhlIGdhbWVib2FyZCB3aXRoIHRoZSBzcGFjZXMsIGludG8gYSBjb25zb2xlIGxvZz9cbiAgICAgICAgLy8gbWF5YmUgYSBkb3VibGUgbWFwXG4gICAgICAgIGdhbWVib2FyZC5ncmlkLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICByb3cubWFwKHNwYWNlID0+IHtcbiAgICAgICAgICAgICAgICBpZihzcGFjZS5oYXNTaGlwID09PSBmYWxzZSAmJiBzcGFjZS53YXNHdWVzc2VkID09PSBmYWxzZSkgcmV0dXJuICdfJ1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNwYWNlLmhhc1NoaXAgPT09IGZhbHNlICYmIHNwYWNlLndhc0d1ZXNzZWQgPT09IHRydWUpIHJldHVybiAnbSdcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzcGFjZS5oYXNTaGlwID09PSB0cnVlICYmIHNwYWNlLndhc0d1ZXNzZWQgPT09IGZhbHNlKSByZXR1cm4gJ28nXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc3BhY2UuaGFzU2hpcCA9PT0gdHJ1ZSAmJiBzcGFjZS53YXNHdWVzc2VkID09PSB0cnVlKSByZXR1cm4gJ3gnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIHRoZSBndWVzc2VkQ29vcmRzIGFycmF5IGNoYW5nZXM7IGlmIHNvLCB0aGUgYXR0YWNrIHdhcyBzdWNjZXNzZnVsLlxuICAgIC8vIHRoaXMgYWJzb2x1dGVseSBtdXN0IGdldCB0ZXN0ZWQuLi5cbiAgICAvLyBmdW5jdGlvbiB0cnlBdHRhY2tVbnRpbFN1Y2Nlc3MoKSB7XG4gICAgLy8gICAgIGxldCBpbml0aWFsR3Vlc3NlcyA9IEpTT04uc3RyaW5naWZ5KGVuZW15R2FtZWJvYXJkLmd1ZXNzZWRDb29yZHMpXG4gICAgLy8gICAgIGxldCBjdXJyZW50R3Vlc3NlcyA9IGluaXRpYWxHdWVzc2VzO1xuICAgIC8vICAgICBsZXQgdmFsaWRQbGF5TWFkZSA9IGZhbHNlO1xuICAgIC8vICAgICBzd2l0Y2ggKGN1cnJlbnRQbGF5ZXIpIHtcbiAgICAvLyAgICAgICAgIGNhc2UgcGxheWVyOlxuICAgIC8vICAgICAgICAgICAgIHdoaWxlICghdmFsaWRQbGF5TWFkZSkge1xuICAgIC8vICAgICAgICAgICAgICAgICAvLyBsZXQgW2NvbCwgcm93XSA9IHByb21wdCgnY29vcmRzIHRvIGF0dGFjaywgaW4gXCJ4LHlcIicpLnNwbGl0KFwiLFwiKVxuICAgIC8vICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSBwYXJzZUludChwcm9tcHQoJ2NvbCB0byBhdHRhY2snKSk7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KHByb21wdCgncm93IHRvIGF0dGFjaycpKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5hdHRhY2soZW5lbXlHYW1lYm9hcmQsIFtjb2wsIHJvd10pXG4gICAgLy8gICAgICAgICAgICAgICAgIGN1cnJlbnRHdWVzc2VzID0gSlNPTi5zdHJpbmdpZnkoZW5lbXlHYW1lYm9hcmQuZ3Vlc3NlZENvb3JkcylcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxHdWVzc2VzICE9PSBjdXJyZW50R3Vlc3NlcykgdmFsaWRQbGF5TWFkZSA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xuICAgIC8vICAgICAgICAgY2FzZSBjb21wdXRlcjpcbiAgICAvLyAgICAgICAgICAgICB3aGlsZSAoIXZhbGlkUGxheU1hZGUpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5yYW5kb21BdHRhY2soZW5lbXlHYW1lYm9hcmQpXG4gICAgLy8gICAgICAgICAgICAgICAgIGN1cnJlbnRHdWVzc2VzID0gSlNPTi5zdHJpbmdpZnkoZW5lbXlHYW1lYm9hcmQuZ3Vlc3NlZENvb3JkcylcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxHdWVzc2VzICE9PSBjdXJyZW50R3Vlc3NlcykgdmFsaWRQbGF5TWFkZSA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuICAgIGZ1bmN0aW9uIHRyeVJhbmRvbUF0dGFja1VudGlsU3VjY2VzcygpIHtcblxuICAgICAgICBsZXQgaW5pdGlhbEd1ZXNzZXMgPSBKU09OLnN0cmluZ2lmeShlbmVteUdhbWVib2FyZC5ndWVzc2VkQ29vcmRzKVxuICAgICAgICBsZXQgY3VycmVudEd1ZXNzZXMgPSBpbml0aWFsR3Vlc3NlcztcbiAgICAgICAgbGV0IHZhbGlkUGxheU1hZGUgPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKCF2YWxpZFBsYXlNYWRlKSB7XG4gICAgICAgICAgICBjdXJyZW50UGxheWVyLnJhbmRvbUF0dGFjayhlbmVteUdhbWVib2FyZClcbiAgICAgICAgICAgIGN1cnJlbnRHdWVzc2VzID0gSlNPTi5zdHJpbmdpZnkoZW5lbXlHYW1lYm9hcmQuZ3Vlc3NlZENvb3JkcylcbiAgICAgICAgICAgIGlmIChpbml0aWFsR3Vlc3NlcyAhPT0gY3VycmVudEd1ZXNzZXMpIHZhbGlkUGxheU1hZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGxheVJvdW5kKGNvb3Jkcz1udWxsKSB7XG5cbiAgICAgICAgc3dpdGNoIChjdXJyZW50UGxheWVyKSB7XG4gICAgICAgICAgICBjYXNlIHBsYXllcjpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGxheWVyJylcbiAgICAgICAgICAgICAgICAvLyB2aXN1YWxpc2VHYW1lYm9hcmQoZW5lbXlHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIC8vIHRyeUF0dGFja1VudGlsU3VjY2VzcygpXG4gICAgICAgICAgICAgICAgLy8gd2lsbCBuZWVkIHRvIE5PVCB1c2UgdHJ5QXR0YWNrVW50aWxTdWNjZXNzXG4gICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5hdHRhY2soZW5lbXlHYW1lYm9hcmQsY29vcmRzKVxuICAgICAgICAgICAgICAgIGNoZWNrSXNHYW1lT3ZlcihlbmVteUdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgc3dhcFBsYXllckFuZEVuZW15KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgY29tcHV0ZXI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbXB1dGVyJylcbiAgICAgICAgICAgICAgICAvLyB2aXN1YWxpc2VHYW1lYm9hcmQoZW5lbXlHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIC8vIHRyeUF0dGFja1VudGlsU3VjY2VzcygpO1xuICAgICAgICAgICAgICAgIHRyeVJhbmRvbUF0dGFja1VudGlsU3VjY2VzcygpO1xuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnRQbGF5ZXIucmFuZG9tQXR0YWNrKGVuZW15R2FtZWJvYXJkKVxuICAgICAgICAgICAgICAgIGNoZWNrSXNHYW1lT3ZlcihlbmVteUdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgc3dhcFBsYXllckFuZEVuZW15KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGxheVJvdW5kLFxuICAgICAgICAgICAgZ2V0UGxheWVyR2FtZWJvYXJkLFxuICAgICAgICAgICAgZ2V0Q29tcHV0ZXJHYW1lYm9hcmQsXG4gICAgICAgIH1cbn0iLCJpbXBvcnQgeyBtYWtlR2FtZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9nYW1lQ29udHJvbGxlclwiO1xuaW1wb3J0IFwiLi9zdHlsZS5jc3NcIjtcbmltcG9ydCB7IG1ha2VEaXNwbGF5Q29udHJvbGxlciB9IGZyb20gXCIuL2Rpc3BsYXlDb250cm9sbGVyXCI7XG5cbm1ha2VEaXNwbGF5Q29udHJvbGxlcigpOyJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsImV4cG9ydHMiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibGlzdCIsInRvU3RyaW5nIiwidGhpcyIsIm1hcCIsIml0ZW0iLCJjb250ZW50IiwibmVlZExheWVyIiwiY29uY2F0IiwibGVuZ3RoIiwiam9pbiIsImkiLCJtb2R1bGVzIiwibWVkaWEiLCJkZWR1cGUiLCJzdXBwb3J0cyIsImxheWVyIiwidW5kZWZpbmVkIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImsiLCJfayIsImNzc01hcHBpbmciLCJidG9hIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInNvdXJjZU1hcHBpbmciLCJzdHlsZXNJbkRPTSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsIm1vZHVsZXNUb0RvbSIsIm9wdGlvbnMiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJiYXNlIiwiY291bnQiLCJpbmRleEJ5SWRlbnRpZmllciIsIm9iaiIsImNzcyIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkRWxlbWVudFN0eWxlIiwiYnlJbmRleCIsInNwbGljZSIsImFwaSIsImRvbUFQSSIsInVwZGF0ZSIsIm5ld09iaiIsInJlbW92ZSIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJpbmRleCIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4IiwibWVtbyIsImluc2VydCIsInN0eWxlIiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3aW5kb3ciLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwiZ2V0VGFyZ2V0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlcyIsImF0dHJpYnV0ZXMiLCJzdHlsZUVsZW1lbnQiLCJub25jZSIsInNldEF0dHJpYnV0ZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlVGFnVHJhbnNmb3JtIiwiYXBwbHkiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImZpcnN0Q2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibmMiLCJsb2NhbHMiLCJTaGlwIiwiY29uc3RydWN0b3IiLCJoaXRzIiwic3VuayIsInNldFN1bmsiLCJoaXQiLCJpc1N1bmsiLCJTcGFjZSIsImhhc1NoaXAiLCJ3YXNHdWVzc2VkIiwibWlzc2VkSGl0Iiwic2hpcCIsIkdhbWVib2FyZCIsImdyaWQiLCJuZXdHcmlkIiwicm93IiwiaiIsInNxdWFyZSIsImNyZWF0ZUdyaWQiLCJhbGxTaGlwQ29vcmRzIiwiZ3Vlc3NlZENvb3JkcyIsImlzT3V0T2ZCb3VuZHMiLCJjb2wiLCJjaGVja0lmQWxyZWFkeVBsYWNlZCIsInBvcHVsYXRlU2hpcENvb3Jkc0FycmF5IiwicGxhY2VTaGlwIiwib3JpZW50YXRpb24iLCJzdGFydENvbCIsInN0YXJ0Um93IiwibmV3U2hpcCIsImluaXRpYWxpc2VTaGlwIiwicGxhY2VBbGxTaGlwc09uQm9hcmQiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJmbG9vciIsImdldFBvc2l0aW9uIiwiY2hlY2tTaGlwRXhpc3RzIiwiZ2V0U2hpcCIsImNoZWNrTWlzc2VkSGl0IiwiY2hlY2tXYXNHdWVzc2VkIiwiY2hlY2tJc0dhbWVPdmVyIiwiY29udmVydGVkQWxsU2hpcENvb3JkcyIsImNvb3JkIiwiY29udmVydGVkR3Vlc3NlZENvb3JkcyIsImNvbnNvbGUiLCJsb2ciLCJldmVyeSIsInNoaXBDb29yZCIsImluY2x1ZGVzIiwicmVjZWl2ZUF0dGFjayIsIlBsYXllciIsImNvbXB1dGVyIiwiYXR0YWNrIiwiZ2FtZWJvYXJkIiwiQ29tcHV0ZXIiLCJzdXBlciIsInJhbmRvbUF0dGFjayIsInJhbmRvbUNvbCIsInJhbmRvbVJvdyIsImdhbWVDb250cm9sbGVyIiwicGxheWVyR2FtZWJvYXJkIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJwbGF5ZXIiLCJjdXJyZW50UGxheWVyIiwiZW5lbXlHYW1lYm9hcmQiLCJpc0dhbWVPdmVyIiwic3dhcFBsYXllckFuZEVuZW15IiwicGxheVJvdW5kIiwiY29vcmRzIiwiaW5pdGlhbEd1ZXNzZXMiLCJjdXJyZW50R3Vlc3NlcyIsInZhbGlkUGxheU1hZGUiLCJ0cnlSYW5kb21BdHRhY2tVbnRpbFN1Y2Nlc3MiLCJnZXRQbGF5ZXJHYW1lYm9hcmQiLCJnZXRDb21wdXRlckdhbWVib2FyZCIsIm1ha2VHYW1lQ29udHJvbGxlciIsInBvcHVsYXRlRWxlbWVudEluZm8iLCJkaXZUeXBlIiwidGV4dCIsInBhcmVudCIsImNsYXNzZXMiLCJuZXdFbGVtZW50IiwiZm9yRWFjaCIsImNsYXNzTmFtZSIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiZGV0ZXJtaW5lVGV4dCIsInNwYWNlIiwiZGlzcGxheUJvdGhHYW1lYm9hcmRzIiwiZ2FtZWJvYXJkQ29udGFpbmVyIiwicm93SW5kZXgiLCJyb3dFbGVtZW50IiwiZGlzcGxheVBsYXllckdhbWVib2FyZCIsImNvbEluZGV4Iiwic3BhY2VFbGVtZW50IiwiZGV0ZXJtaW5lQ2VsbFN0eWxlIiwiZGF0YXNldCIsImRpc3BsYXlDb21wdXRlckdhbWVib2FyZCIsInJlbW92ZUJvdGhHYW1lQm9hcmRzIiwicXVlcnlTZWxlY3RvckFsbCIsImNvbnRhaW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsImNvbnRhaW5zIiwicGFyc2VJbnQiLCJjaGVja0lmR2FtZU92ZXIiLCJtYWtlRGlzcGxheUNvbnRyb2xsZXIiXSwic291cmNlUm9vdCI6IiJ9